"use strict";var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var xe=O((jf,St)=>{"use strict";var Y=e=>e&&typeof e.message=="string",Oe=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return Y(r)?r:void 0}else return Y(t)?t:void 0},wt=(e,t)=>{if(!Y(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=Oe(e);return n?(t.add(e),r+`
caused by: `+wt(n,t)):r},In=e=>wt(e,new Set),bt=(e,t,r)=>{if(!Y(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=Oe(e);if(i){t.add(e);let s=typeof e.cause=="function";return n+(s?"":": ")+bt(i,t,s)}else return n},qn=e=>bt(e,new Set);St.exports={isErrorLike:Y,getErrorCause:Oe,stackWithCauses:In,messageWithCauses:qn}});var ve=O((Pf,Et)=>{"use strict";var Nn=Symbol("circular-ref-tag"),re=Symbol("pino-raw-err-ref"),_t=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[re]},set:function(e){this[re]=e}}});Object.defineProperty(_t,re,{writable:!0,value:{}});Et.exports={pinoErrProto:_t,pinoErrorSymbols:{seen:Nn,rawSymbol:re}}});var vt=O(($f,xt)=>{"use strict";xt.exports=Te;var{messageWithCauses:Rn,stackWithCauses:Wn,isErrorLike:Ot}=xe(),{pinoErrProto:Fn,pinoErrorSymbols:Mn}=ve(),{seen:Ae}=Mn,{toString:zn}=Object.prototype;function Te(e){if(!Ot(e))return e;e[Ae]=void 0;let t=Object.create(Fn);t.type=zn.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=Rn(e),t.stack=Wn(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Te(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Ot(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Ae)&&(t[r]=Te(n)):t[r]=n}return delete e[Ae],t.raw=e,t}});var Tt=O((Bf,At)=>{"use strict";At.exports=ie;var{isErrorLike:ke}=xe(),{pinoErrProto:Vn,pinoErrorSymbols:Kn}=ve(),{seen:ne}=Kn,{toString:Un}=Object.prototype;function ie(e){if(!ke(e))return e;e[ne]=void 0;let t=Object.create(Vn);t.type=Un.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>ie(r))),ke(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,ne)&&(t.cause=ie(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];ke(n)?Object.prototype.hasOwnProperty.call(n,ne)||(t[r]=ie(n)):t[r]=n}return delete e[ne],t.raw=e,t}});var jt=O((Df,Ct)=>{"use strict";Ct.exports={mapHttpRequest:Jn,reqSerializer:Lt};var Le=Symbol("pino-raw-req-ref"),kt=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Le]},set:function(e){this[Le]=e}}});Object.defineProperty(kt,Le,{writable:!0,value:{}});function Lt(e){let t=e.info||e.socket,r=Object.create(kt);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function Jn(e){return{req:Lt(e)}}});var Dt=O((If,Bt)=>{"use strict";Bt.exports={mapHttpResponse:Gn,resSerializer:$t};var Ce=Symbol("pino-raw-res-ref"),Pt=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Ce]},set:function(e){this[Ce]=e}}});Object.defineProperty(Pt,Ce,{writable:!0,value:{}});function $t(e){let t=Object.create(Pt);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function Gn(e){return{res:$t(e)}}});var Pe=O((qf,It)=>{"use strict";var je=vt(),Hn=Tt(),se=jt(),oe=Dt();It.exports={err:je,errWithCause:Hn,mapHttpRequest:se.mapHttpRequest,mapHttpResponse:oe.mapHttpResponse,req:se.reqSerializer,res:oe.resSerializer,wrapErrorSerializer:function(t){return t===je?t:function(n){return t(je(n))}},wrapRequestSerializer:function(t){return t===se.reqSerializer?t:function(n){return t(se.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===oe.resSerializer?t:function(n){return t(oe.resSerializer(n))}}}});var $e=O((Nf,qt)=>{"use strict";function Xn(e,t){return t}qt.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=Xn;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let s of n)s&&i.push(s.getFileName());return i}});var zt=O((Rf,Mt)=>{"use strict";function Be(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];for(let r=0;r<e.length;r++)t[r]=Be(e[r]);return t}if(typeof e=="object"){let t=Object.create(Object.getPrototypeOf(e));for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Be(e[r]));return t}return e}function Nt(e){let t=[],r="",n=!1,i=!1,s="";for(let h=0;h<e.length;h++){let l=e[h];!n&&l==="."?r&&(t.push(r),r=""):l==="["?(r&&(t.push(r),r=""),n=!0):l==="]"&&n?(t.push(r),r="",n=!1,i=!1):(l==='"'||l==="'")&&n?i?l===s?(i=!1,s=""):r+=l:(i=!0,s=l):r+=l}return r&&t.push(r),t}function Rt(e,t,r){let n=e;for(let s=0;s<t.length-1;s++){let h=t[s];if(typeof n!="object"||n===null||!(h in n)||typeof n[h]!="object"||n[h]===null)return!1;n=n[h]}let i=t[t.length-1];if(i==="*"){if(Array.isArray(n))for(let s=0;s<n.length;s++)n[s]=r;else if(typeof n=="object"&&n!==null)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(n[s]=r)}else typeof n=="object"&&n!==null&&i in n&&Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=r);return!0}function Wt(e,t){let r=e;for(let i=0;i<t.length-1;i++){let s=t[i];if(typeof r!="object"||r===null||!(s in r)||typeof r[s]!="object"||r[s]===null)return!1;r=r[s]}let n=t[t.length-1];if(n==="*"){if(Array.isArray(r))for(let i=0;i<r.length;i++)r[i]=void 0;else if(typeof r=="object"&&r!==null)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&delete r[i]}else typeof r=="object"&&r!==null&&n in r&&Object.prototype.hasOwnProperty.call(r,n)&&delete r[n];return!0}var le=Symbol("PATH_NOT_FOUND");function Yn(e,t){let r=e;for(let n of t){if(r==null||typeof r!="object"||r===null||!(n in r))return le;r=r[n]}return r}function Qn(e,t){let r=e;for(let n of t){if(r==null||typeof r!="object"||r===null)return;r=r[n]}return r}function Zn(e,t,r,n=!1){for(let i of t){let s=Nt(i);if(s.includes("*"))Ft(e,s,r,i,n);else if(n)Wt(e,s);else{let h=Yn(e,s);if(h===le)continue;let l=typeof r=="function"?r(h,s):r;Rt(e,s,l)}}}function Ft(e,t,r,n,i=!1){let s=t.indexOf("*");if(s===t.length-1){let h=t.slice(0,-1),l=e;for(let f of h){if(l==null||typeof l!="object"||l===null)return;l=l[f]}if(Array.isArray(l))if(i)for(let f=0;f<l.length;f++)l[f]=void 0;else for(let f=0;f<l.length;f++){let a=[...h,f.toString()],c=typeof r=="function"?r(l[f],a):r;l[f]=c}else if(typeof l=="object"&&l!==null)if(i){let f=[];for(let a in l)Object.prototype.hasOwnProperty.call(l,a)&&f.push(a);for(let a of f)delete l[a]}else for(let f in l){let a=[...h,f],c=typeof r=="function"?r(l[f],a):r;l[f]=c}}else ei(e,t,r,s,n,i)}function ei(e,t,r,n,i,s=!1){let h=t.slice(0,n),l=t.slice(n+1),f=[];function a(c,u){if(u===h.length){if(Array.isArray(c))for(let m=0;m<c.length;m++)f[u]=m.toString(),a(c[m],u+1);else if(typeof c=="object"&&c!==null)for(let m in c)f[u]=m,a(c[m],u+1)}else if(u<h.length){let m=h[u];c&&typeof c=="object"&&c!==null&&m in c&&(f[u]=m,a(c[m],u+1))}else if(l.includes("*"))Ft(c,l,typeof r=="function"?(y,o)=>{let g=[...f.slice(0,u),...o];return r(y,g)}:r,i,s);else if(s)Wt(c,l);else{let m=typeof r=="function"?r(Qn(c,l),[...f.slice(0,u),...l]):r;Rt(c,l,m)}}if(h.length===0)a(e,0);else{let c=e;for(let u=0;u<h.length;u++){let m=h[u];if(c==null||typeof c!="object"||c===null)return;c=c[m],f[u]=m}c!=null&&a(c,h.length)}}function ti(e){if(e.length===0)return null;let t=new Map;for(let r of e){let n=Nt(r),i=t;for(let s=0;s<n.length;s++){let h=n[s];i.has(h)||i.set(h,new Map),i=i.get(h)}}return t}function ri(e,t){if(!t)return e;function r(n,i,s=0){if(!i||i.size===0||n===null||typeof n!="object")return n;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n)){let l=[];for(let f=0;f<n.length;f++){let a=f.toString();i.has(a)||i.has("*")?l[f]=r(n[f],i.get(a)||i.get("*")):l[f]=n[f]}return l}let h=Object.create(Object.getPrototypeOf(n));for(let l in n)Object.prototype.hasOwnProperty.call(n,l)&&(i.has(l)||i.has("*")?h[l]=r(n[l],i.get(l)||i.get("*")):h[l]=n[l]);return h}return r(e,t)}function ni(e){if(typeof e!="string")throw new Error("Paths must be (non-empty) strings");if(e==="")throw new Error("Invalid redaction path ()");if(e.includes(".."))throw new Error(`Invalid redaction path (${e})`);if(e.includes(","))throw new Error(`Invalid redaction path (${e})`);let t=0,r=!1,n="";for(let i=0;i<e.length;i++){let s=e[i];if((s==='"'||s==="'")&&t>0)r?s===n&&(r=!1,n=""):(r=!0,n=s);else if(s==="["&&!r)t++;else if(s==="]"&&!r&&(t--,t<0))throw new Error(`Invalid redaction path (${e})`)}if(t!==0)throw new Error(`Invalid redaction path (${e})`)}function ii(e){if(!Array.isArray(e))throw new TypeError("paths must be an array");for(let t of e)ni(t)}function si(e={}){let{paths:t=[],censor:r="[REDACTED]",serialize:n=JSON.stringify,strict:i=!0,remove:s=!1}=e;ii(t);let h=ti(t);return function(f){if(i&&(f===null||typeof f!="object")&&(f==null||typeof f!="object"))return n?n(f):f;let a=ri(f,h),c=f,u=r;return typeof r=="function"&&(u=r),Zn(a,t,u,s),n===!1?(a.restore=function(){return Be(c)},a):typeof n=="function"?n(a):JSON.stringify(a)}}Mt.exports=si});var G=O((Wf,Vt)=>{"use strict";var oi=Symbol("pino.setLevel"),li=Symbol("pino.getLevel"),fi=Symbol("pino.levelVal"),ui=Symbol("pino.levelComp"),ci=Symbol("pino.useLevelLabels"),ai=Symbol("pino.useOnlyCustomLevels"),hi=Symbol("pino.mixin"),di=Symbol("pino.lsCache"),yi=Symbol("pino.chindings"),mi=Symbol("pino.asJson"),gi=Symbol("pino.write"),pi=Symbol("pino.redactFmt"),wi=Symbol("pino.time"),bi=Symbol("pino.timeSliceIndex"),Si=Symbol("pino.stream"),_i=Symbol("pino.stringify"),Ei=Symbol("pino.stringifySafe"),Oi=Symbol("pino.stringifiers"),xi=Symbol("pino.end"),vi=Symbol("pino.formatOpts"),Ai=Symbol("pino.messageKey"),Ti=Symbol("pino.errorKey"),ki=Symbol("pino.nestedKey"),Li=Symbol("pino.nestedKeyStr"),Ci=Symbol("pino.mixinMergeStrategy"),ji=Symbol("pino.msgPrefix"),Pi=Symbol("pino.wildcardFirst"),$i=Symbol.for("pino.serializers"),Bi=Symbol.for("pino.formatters"),Di=Symbol.for("pino.hooks"),Ii=Symbol.for("pino.metadata");Vt.exports={setLevelSym:oi,getLevelSym:li,levelValSym:fi,levelCompSym:ui,useLevelLabelsSym:ci,mixinSym:hi,lsCacheSym:di,chindingsSym:yi,asJsonSym:mi,writeSym:gi,serializersSym:$i,redactFmtSym:pi,timeSym:wi,timeSliceIndexSym:bi,streamSym:Si,stringifySym:_i,stringifySafeSym:Ei,stringifiersSym:Oi,endSym:xi,formatOptsSym:vi,messageKeySym:Ai,errorKeySym:Ti,nestedKeySym:ki,wildcardFirstSym:Pi,needsMetadataGsym:Ii,useOnlyCustomLevelsSym:ai,formattersSym:Bi,hooksSym:Di,nestedKeyStrSym:Li,mixinMergeStrategySym:Ci,msgPrefixSym:ji}});var Ie=O((Ff,Gt)=>{"use strict";var Kt=zt(),{redactFmtSym:qi,wildcardFirstSym:fe}=G(),De=/[^.[\]]+|\[([^[\]]*?)\]/g,Ut="[Redacted]",Jt=!1;function Ni(e,t){let{paths:r,censor:n,remove:i}=Ri(e),s=r.reduce((f,a)=>{De.lastIndex=0;let c=De.exec(a),u=De.exec(a),m=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(m==="*"&&(m=fe),u===null)return f[m]=null,f;if(f[m]===null)return f;let{index:y}=u,o=`${a.substr(y,a.length-1)}`;return f[m]=f[m]||[],m!==fe&&f[m].length===0&&f[m].push(...f[fe]||[]),m===fe&&Object.keys(f).forEach(function(g){f[g]&&f[g].push(o)}),f[m].push(o),f},{}),h={[qi]:Kt({paths:r,censor:n,serialize:t,strict:Jt,remove:i})},l=(...f)=>t(typeof n=="function"?n(...f):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((f,a)=>{if(s[a]===null)f[a]=c=>l(c,[a]);else{let c=typeof n=="function"?(u,m)=>n(u,[a,...m]):n;f[a]=Kt({paths:s[a],censor:c,serialize:t,strict:Jt,remove:i})}return f},h)}function Ri(e){if(Array.isArray(e))return e={paths:e,censor:Ut},e;let{paths:t,censor:r=Ut,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),{paths:t,censor:r,remove:n}}Gt.exports=Ni});var Yt=O((Mf,Xt)=>{"use strict";var Wi=()=>"",Fi=()=>`,"time":${Date.now()}`,Mi=()=>`,"time":${Math.round(Date.now()/1e3)}`,zi=()=>`,"time":"${new Date(Date.now()).toISOString()}"`,Vi=1000000n,Ht=1000000000n,Ki=BigInt(Date.now())*Vi,Ui=process.hrtime.bigint(),Ji=()=>{let e=process.hrtime.bigint()-Ui,t=Ki+e,r=t/Ht,n=t%Ht,i=Number(r*1000n+n/1000000n),s=new Date(i),h=s.getUTCFullYear(),l=(s.getUTCMonth()+1).toString().padStart(2,"0"),f=s.getUTCDate().toString().padStart(2,"0"),a=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),u=s.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${h}-${l}-${f}T${a}:${c}:${u}.${n.toString().padStart(9,"0")}Z"`};Xt.exports={nullTime:Wi,epochTime:Fi,unixTime:Mi,isoTime:zi,isoTimeNano:Ji}});var Zt=O((zf,Qt)=>{"use strict";function Gi(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Qt.exports=Hi;function Hi(e,t,r){var n=r&&r.stringify||Gi,i=1;if(typeof e=="object"&&e!==null){var s=t.length+i;if(s===1)return e;var h=new Array(s);h[0]=n(e);for(var l=1;l<s;l++)h[l]=n(t[l]);return h.join(" ")}if(typeof e!="string")return e;var f=t.length;if(f===0)return e;for(var a="",c=1-i,u=-1,m=e&&e.length||0,y=0;y<m;){if(e.charCodeAt(y)===37&&y+1<m){switch(u=u>-1?u:0,e.charCodeAt(y+1)){case 100:case 102:if(c>=f||t[c]==null)break;u<y&&(a+=e.slice(u,y)),a+=Number(t[c]),u=y+2,y++;break;case 105:if(c>=f||t[c]==null)break;u<y&&(a+=e.slice(u,y)),a+=Math.floor(Number(t[c])),u=y+2,y++;break;case 79:case 111:case 106:if(c>=f||t[c]===void 0)break;u<y&&(a+=e.slice(u,y));var o=typeof t[c];if(o==="string"){a+="'"+t[c]+"'",u=y+2,y++;break}if(o==="function"){a+=t[c].name||"<anonymous>",u=y+2,y++;break}a+=n(t[c]),u=y+2,y++;break;case 115:if(c>=f)break;u<y&&(a+=e.slice(u,y)),a+=String(t[c]),u=y+2,y++;break;case 37:u<y&&(a+=e.slice(u,y)),a+="%",u=y+2,y++,c--;break}++c}++y}return u===-1?e:(u<m&&(a+=e.slice(u)),a)}});var Ne=O((Vf,qe)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));qe.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};qe.exports=e}});var lr=O((Kf,or)=>{"use strict";var k=require("fs"),Xi=require("events"),Yi=require("util").inherits,er=require("path"),We=Ne(),Qi=require("assert"),ue=100,ce=Buffer.allocUnsafe(0),Zi=16*1024,tr="buffer",rr="utf8",[es,ts]=(process.versions.node||"0.0").split(".").map(Number),rs=es>=22&&ts>=7;function nr(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(s,h){if(s){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",s)}):t.emit("error",s);return}let l=t._reopening;t.fd=h,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():l&&process.nextTick(()=>t.emit("drain")))}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&k.mkdirSync(er.dirname(e),{recursive:!0});let s=k.openSync(e,n,i);r(null,s)}catch(s){throw r(s),s}else t.mkdir?k.mkdir(er.dirname(e),{recursive:!0},s=>{if(s)return r(s);k.open(e,n,i,r)}):k.open(e,n,i,r)}function I(e){if(!(this instanceof I))return new I(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:s,periodicFlush:h,sync:l,append:f=!0,mkdir:a,retryEAGAIN:c,fsync:u,contentMode:m,mode:y}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=s||Zi,this._periodicFlush=h||0,this._periodicFlushTimer=void 0,this.sync=l||!1,this.writable=!0,this._fsync=u||!1,this.append=f||!1,this.mode=y,this.retryEAGAIN=c||(()=>!0),this.mkdir=a||!1;let o,g;if(m===tr)this._writingBuf=ce,this.write=ss,this.flush=ls,this.flushSync=us,this._actualWrite=as,o=()=>k.writeSync(this.fd,this._writingBuf),g=()=>k.write(this.fd,this._writingBuf,this.release);else if(m===void 0||m===rr)this._writingBuf="",this.write=is,this.flush=os,this.flushSync=fs,this._actualWrite=cs,o=()=>k.writeSync(this.fd,this._writingBuf,"utf8"),g=()=>k.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${rr}" and "${tr}", but passed ${m}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")nr(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(p,S)=>{if(p){if((p.code==="EAGAIN"||p.code==="EBUSY")&&this.retryEAGAIN(p,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{We(ue),this.release(void 0,0)}catch(_){this.release(_)}else setTimeout(g,ue);else this._writing=!1,this.emit("error",p);return}this.emit("write",S);let b=Re(this._writingBuf,this._len,S);if(this._len=b.len,this._writingBuf=b.writingBuf,this._writingBuf.length){if(!this.sync){g();return}try{do{let _=o(),v=Re(this._writingBuf,this._len,_);this._len=v.len,this._writingBuf=v.writingBuf}while(this._writingBuf.length)}catch(_){this.release(_);return}}this._fsync&&k.fsyncSync(this.fd);let w=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):w>this.minLength?this._actualWrite():this._ending?w>0?this._actualWrite():(this._writing=!1,ae(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(ns,this)):this.emit("drain"))},this.on("newListener",function(p){p==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function Re(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}function ns(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}Yi(I,Xi);function ir(e,t){return e.length===0?ce:e.length===1?e[0]:Buffer.concat(e,t)}function is(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function ss(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function sr(e){this._flushPending=!0;let t=()=>{if(this._fsync)this._flushPending=!1,e();else try{k.fsync(this.fd,n=>{this._flushPending=!1,e(n)})}catch(n){e(n)}this.off("error",r)},r=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",r)}function os(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&sr.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function ls(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&sr.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}I.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&k.close(t,r=>{if(r)return this.emit("error",r)})}),nr(this.file,this)};I.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():ae(this)))};function fs(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=k.writeSync(this.fd,e,"utf8"),r=Re(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;We(ue)}}try{k.fsyncSync(this.fd)}catch{}}function us(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=ce);let e=ce;for(;this._bufs.length||e.length;){e.length<=0&&(e=ir(this._bufs[0],this._lens[0]));try{let t=k.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;We(ue)}}}I.prototype.destroy=function(){this.destroyed||ae(this)};function cs(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=k.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else k.write(this.fd,this._writingBuf,"utf8",e)}function as(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:ir(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=k.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else rs&&(this._writingBuf=Buffer.from(this._writingBuf)),k.write(this.fd,this._writingBuf,e)}function ae(e){if(e.fd===-1){e.once("ready",ae.bind(null,e));return}e._periodicFlushTimer!==void 0&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],Qi(typeof e.fd=="number",`sonic.fd must be a number, got ${typeof e.fd}`);try{k.fsync(e.fd,t)}catch{}function t(){e.fd!==1&&e.fd!==2?k.close(e.fd,r):r()}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}I.SonicBoom=I;I.default=I;or.exports=I});var Fe=O((Uf,hr)=>{"use strict";var q={exit:[],beforeExit:[]},fr={exit:ys,beforeExit:ms},H;function hs(){H===void 0&&(H=new FinalizationRegistry(gs))}function ds(e){q[e].length>0||process.on(e,fr[e])}function ur(e){q[e].length>0||(process.removeListener(e,fr[e]),q.exit.length===0&&q.beforeExit.length===0&&(H=void 0))}function ys(){cr("exit")}function ms(){cr("beforeExit")}function cr(e){for(let t of q[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}q[e]=[]}function gs(e){for(let t of["exit","beforeExit"]){let r=q[t].indexOf(e);q[t].splice(r,r+1),ur(t)}}function ar(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");ds(e);let n=new WeakRef(t);n.fn=r,hs(),H.register(t,n),q[e].push(n)}function ps(e,t){ar("exit",e,t)}function ws(e,t){ar("beforeExit",e,t)}function bs(e){if(H!==void 0){H.unregister(e);for(let t of["exit","beforeExit"])q[t]=q[t].filter(r=>{let n=r.deref();return n&&n!==e}),ur(t)}}hr.exports={register:ps,registerBeforeExit:ws,unregister:bs}});var dr=O((Jf,Ss)=>{Ss.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var mr=O((Gf,yr)=>{"use strict";function _s(e,t,r,n,i){let s=Date.now()+n,h=Atomics.load(e,t);if(h===r){i(null,"ok");return}let l=h,f=a=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{l=h,h=Atomics.load(e,t),h===l?f(a>=1e3?1e3:a*2):h===r?i(null,"ok"):i(null,"not-equal")},a)};f(1)}function Es(e,t,r,n,i){let s=Date.now()+n,h=Atomics.load(e,t);if(h!==r){i(null,"ok");return}let l=f=>{Date.now()>s?i(null,"timed-out"):setTimeout(()=>{h=Atomics.load(e,t),h!==r?i(null,"ok"):l(f>=1e3?1e3:f*2)},f)};l(1)}yr.exports={wait:_s,waitDiff:Es}});var pr=O((Hf,gr)=>{"use strict";gr.exports={WRITE_INDEX:4,READ_INDEX:8}});var Er=O((Xf,_r)=>{"use strict";var{version:Os}=dr(),{EventEmitter:xs}=require("events"),{Worker:vs}=require("worker_threads"),{join:As}=require("path"),{pathToFileURL:Ts}=require("url"),{wait:ks}=mr(),{WRITE_INDEX:P,READ_INDEX:N}=pr(),Ls=require("buffer"),Cs=require("assert"),d=Symbol("kImpl"),js=Ls.constants.MAX_STRING_LENGTH,Q=class{constructor(t){this._value=t}deref(){return this._value}},de=class{register(){}unregister(){}},Ps=process.env.NODE_V8_COVERAGE?de:global.FinalizationRegistry||de,$s=process.env.NODE_V8_COVERAGE?Q:global.WeakRef||Q,wr=new Ps(e=>{e.exited||e.terminate()});function Bs(e,t){let{filename:r,workerData:n}=t,s=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||As(__dirname,"lib","worker.js"),h=new vs(s,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:Ts(r).href,dataBuf:e[d].dataBuf,stateBuf:e[d].stateBuf,workerData:{$context:{threadStreamVersion:Os},...n}}});return h.stream=new Q(e),h.on("message",Ds),h.on("exit",Sr),wr.register(e,h),h}function br(e){Cs(!e[d].sync),e[d].needDrain&&(e[d].needDrain=!1,e.emit("drain"))}function he(e){let t=Atomics.load(e[d].state,P),r=e[d].data.length-t;if(r>0){if(e[d].buf.length===0){e[d].flushing=!1,e[d].ending?Ue(e):e[d].needDrain&&process.nextTick(br,e);return}let n=e[d].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[d].buf=e[d].buf.slice(r),ye(e,n,he.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[d].state,N,0),Atomics.store(e[d].state,P,0);i>e[d].data.length;)r=r/2,n=e[d].buf.slice(0,r),i=Buffer.byteLength(n);e[d].buf=e[d].buf.slice(r),ye(e,n,he.bind(null,e))}})}else if(r===0){if(t===0&&e[d].buf.length===0)return;e.flush(()=>{Atomics.store(e[d].state,N,0),Atomics.store(e[d].state,P,0),he(e)})}else R(e,new Error("overwritten"))}function Ds(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new $s(t),t.flush(()=>{t[d].ready=!0,t.emit("ready")});break;case"ERROR":R(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:R(t,new Error("this should not happen: "+e.code))}}function Sr(e){let t=this.stream.deref();t!==void 0&&(wr.unregister(t),t.worker.exited=!0,t.worker.off("exit",Sr),R(t,e!==0?new Error("the worker thread exited"):null))}var ze=class extends xs{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[d]={},this[d].stateBuf=new SharedArrayBuffer(128),this[d].state=new Int32Array(this[d].stateBuf),this[d].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[d].data=Buffer.from(this[d].dataBuf),this[d].sync=t.sync||!1,this[d].ending=!1,this[d].ended=!1,this[d].needDrain=!1,this[d].destroyed=!1,this[d].flushing=!1,this[d].ready=!1,this[d].finished=!1,this[d].errored=null,this[d].closed=!1,this[d].buf="",this.worker=Bs(this,t),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(t){if(this[d].destroyed)return Ve(this,new Error("the worker has exited")),!1;if(this[d].ending)return Ve(this,new Error("the worker is ending")),!1;if(this[d].flushing&&this[d].buf.length+t.length>=js)try{Me(this),this[d].flushing=!0}catch(r){return R(this,r),!1}if(this[d].buf+=t,this[d].sync)try{return Me(this),!0}catch(r){return R(this,r),!1}return this[d].flushing||(this[d].flushing=!0,setImmediate(he,this)),this[d].needDrain=this[d].data.length-this[d].buf.length-Atomics.load(this[d].state,P)<=0,!this[d].needDrain}end(){this[d].destroyed||(this[d].ending=!0,Ue(this))}flush(t){if(this[d].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[d].state,P);ks(this[d].state,N,r,1/0,(n,i)=>{if(n){R(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[d].destroyed||(Me(this),Ke(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[d].ready}get destroyed(){return this[d].destroyed}get closed(){return this[d].closed}get writable(){return!this[d].destroyed&&!this[d].ending}get writableEnded(){return this[d].ending}get writableFinished(){return this[d].finished}get writableNeedDrain(){return this[d].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[d].errored}};function Ve(e,t){setImmediate(()=>{e.emit("error",t)})}function R(e,t){e[d].destroyed||(e[d].destroyed=!0,t&&(e[d].errored=t,Ve(e,t)),e.worker.exited?setImmediate(()=>{e[d].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[d].closed=!0,e.emit("close")}))}function ye(e,t,r){let n=Atomics.load(e[d].state,P),i=Buffer.byteLength(t);return e[d].data.write(t,n),Atomics.store(e[d].state,P,n+i),Atomics.notify(e[d].state,P),r(),!0}function Ue(e){if(!(e[d].ended||!e[d].ending||e[d].flushing)){e[d].ended=!0;try{e.flushSync();let t=Atomics.load(e[d].state,N);Atomics.store(e[d].state,P,-1),Atomics.notify(e[d].state,P);let r=0;for(;t!==-1;){if(Atomics.wait(e[d].state,N,t,1e3),t=Atomics.load(e[d].state,N),t===-2){R(e,new Error("end() failed"));return}if(++r===10){R(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[d].finished=!0,e.emit("finish")})}catch(t){R(e,t)}}}function Me(e){let t=()=>{e[d].ending?Ue(e):e[d].needDrain&&process.nextTick(br,e)};for(e[d].flushing=!1;e[d].buf.length!==0;){let r=Atomics.load(e[d].state,P),n=e[d].data.length-r;if(n===0){Ke(e),Atomics.store(e[d].state,N,0),Atomics.store(e[d].state,P,0);continue}else if(n<0)throw new Error("overwritten");let i=e[d].buf.slice(0,n),s=Buffer.byteLength(i);if(s<=n)e[d].buf=e[d].buf.slice(n),ye(e,i,t);else{for(Ke(e),Atomics.store(e[d].state,N,0),Atomics.store(e[d].state,P,0);s>e[d].buf.length;)n=n/2,i=e[d].buf.slice(0,n),s=Buffer.byteLength(i);e[d].buf=e[d].buf.slice(n),ye(e,i,t)}}}function Ke(e){if(e[d].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[d].state,P),r=0;for(;;){let n=Atomics.load(e[d].state,N);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[d].state,N,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}_r.exports=ze});var He=O((Yf,Or)=>{"use strict";var{createRequire:Is}=require("module"),qs=$e(),{join:Je,isAbsolute:Ns,sep:Rs}=require("node:path"),Ws=Ne(),Ge=Fe(),Fs=Er();function Ms(e){Ge.register(e,Vs),Ge.registerBeforeExit(e,Ks),e.on("close",function(){Ge.unregister(e)})}function zs(e,t,r,n){let i=new Fs({filename:e,workerData:t,workerOpts:r,sync:n});i.on("ready",s),i.on("close",function(){process.removeListener("exit",h)}),process.on("exit",h);function s(){process.removeListener("exit",h),i.unref(),r.autoEnd!==!1&&Ms(i)}function h(){i.closed||(i.flushSync(),Ws(100),i.end())}return i}function Vs(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function Ks(e){e.flushSync()}function Us(e){let{pipeline:t,targets:r,levels:n,dedupe:i,worker:s={},caller:h=qs(),sync:l=!1}=e,f={...e.options},a=typeof h=="string"?[h]:h,c="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},u=e.target;if(u&&r)throw new Error("only one of target or targets can be specified");return r?(u=c["pino-worker"]||Je(__dirname,"worker.js"),f.targets=r.filter(y=>y.target).map(y=>({...y,target:m(y.target)})),f.pipelines=r.filter(y=>y.pipeline).map(y=>y.pipeline.map(o=>({...o,level:y.level,target:m(o.target)})))):t&&(u=c["pino-worker"]||Je(__dirname,"worker.js"),f.pipelines=[t.map(y=>({...y,target:m(y.target)}))]),n&&(f.levels=n),i&&(f.dedupe=i),f.pinoWillSendConfig=!0,zs(m(u),f,s,l);function m(y){if(y=c[y]||y,Ns(y)||y.indexOf("file://")===0)return y;if(y==="pino/file")return Je(__dirname,"..","file.js");let o;for(let g of a)try{let p=g==="node:repl"?process.cwd()+Rs:g;o=Is(p).resolve(y);break}catch{continue}if(!o)throw new Error(`unable to determine transport target for "${y}"`);return o}}Or.exports=Us});var pe=O((Qf,Ir)=>{"use strict";var Js=require("node:diagnostics_channel"),xr=Zt(),{mapHttpRequest:Gs,mapHttpResponse:Hs}=Pe(),Ye=lr(),vr=Fe(),{lsCacheSym:Xs,chindingsSym:Cr,writeSym:Ar,serializersSym:jr,formatOptsSym:Tr,endSym:Ys,stringifiersSym:Pr,stringifySym:$r,stringifySafeSym:Qe,wildcardFirstSym:Br,nestedKeySym:Qs,formattersSym:Dr,messageKeySym:Zs,errorKeySym:eo,nestedKeyStrSym:to,msgPrefixSym:me}=G(),{isMainThread:ro}=require("worker_threads"),no=He(),kr=Js.tracingChannel("pino_asJson");function X(){}function io(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let s=n;n!==null&&(n.method&&n.headers&&n.socket?n=Gs(n):typeof n.setHeader=="function"&&(n=Hs(n)));let h;s===null&&i.length===0?h=[null]:(s=i.shift(),h=i),typeof this[me]=="string"&&s!==void 0&&s!==null&&(s=this[me]+s),this[Ar](n,xr(s,h,this[Tr]),e)}else{let s=n===void 0?i.shift():n;typeof this[me]=="string"&&s!==void 0&&s!==null&&(s=this[me]+s),this[Ar](null,xr(s,i,this[Tr]),e)}}}function Xe(e){let t="",r=0,n=!1,i=255,s=e.length;if(s>100)return JSON.stringify(e);for(var h=0;h<s&&i>=32;h++)i=e.charCodeAt(h),(i===34||i===92)&&(t+=e.slice(r,h)+"\\",r=h,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function so(e,t,r,n){if(kr.hasSubscribers===!1)return Lr.call(this,e,t,r,n);let i={instance:this,arguments};return kr.traceSync(Lr,i,this,e,t,r,n)}function Lr(e,t,r,n){let i=this[$r],s=this[Qe],h=this[Pr],l=this[Ys],f=this[Cr],a=this[jr],c=this[Dr],u=this[Zs],m=this[eo],y=this[Xs][r]+n;y=y+f;let o;c.log&&(e=c.log(e));let g=h[Br],p="";for(let b in e)if(o=e[b],Object.prototype.hasOwnProperty.call(e,b)&&o!==void 0){a[b]?o=a[b](o):b===m&&a.err&&(o=a.err(o));let w=h[b]||g;switch(typeof o){case"undefined":case"function":continue;case"number":Number.isFinite(o)===!1&&(o=null);case"boolean":w&&(o=w(o));break;case"string":o=(w||Xe)(o);break;default:o=(w||i)(o,s)}if(o===void 0)continue;let _=Xe(b);p+=","+_+":"+o}let S="";if(t!==void 0){o=a[u]?a[u](t):t;let b=h[u]||g;switch(typeof o){case"function":break;case"number":Number.isFinite(o)===!1&&(o=null);case"boolean":b&&(o=b(o)),S=',"'+u+'":'+o;break;case"string":o=(b||Xe)(o),S=',"'+u+'":'+o;break;default:o=(b||i)(o,s),S=',"'+u+'":'+o}}return this[Qs]&&p?y+this[to]+p.slice(1)+"}"+S+l:y+p+S+l}function oo(e,t){let r,n=e[Cr],i=e[$r],s=e[Qe],h=e[Pr],l=h[Br],f=e[jr],a=e[Dr].bindings;t=a(t);for(let c in t)if(r=t[c],((c.length<5||c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels")&&t.hasOwnProperty(c)&&r!==void 0)===!0){if(r=f[c]?f[c](r):r,r=(h[c]||l||i)(r,s),r===void 0)continue;n+=',"'+c+'":'+r}return n}function lo(e){return e.write!==e.constructor.prototype.write}function ge(e){let t=new Ye(e);return t.on("error",r),!e.sync&&ro&&(vr.register(t,fo),t.on("close",function(){vr.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=X,t.end=X,t.flushSync=X,t.destroy=X;return}t.removeListener("error",r),t.emit("error",n)}}function fo(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function uo(e){return function(r,n,i={},s){if(typeof i=="string")s=ge({dest:i}),i={};else if(typeof s=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");s=ge({dest:s})}else if(i instanceof Ye||i.writable||i._writableState)s=i,i={};else if(i.transport){if(i.transport instanceof Ye||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let f;i.customLevels&&(f=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),s=no({caller:n,...i.transport,levels:f})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:h,onChild:l}=i;return h===!1&&(i.level="silent"),l||(i.onChild=X),s||(lo(process.stdout)?s=process.stdout:s=ge({fd:process.stdout.fd||1})),{opts:i,stream:s}}}function co(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Qe])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function ao(e,t,r){return{level:e,bindings:t,log:r}}function ho(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}Ir.exports={noop:X,buildSafeSonicBoom:ge,asChindings:oo,asJson:so,genLog:io,createArgsNormalizer:uo,stringify:co,buildFormatters:ao,normalizeDestFileDescriptor:ho}});var we=O((Zf,qr)=>{var yo={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},mo={ASC:"ASC",DESC:"DESC"};qr.exports={DEFAULT_LEVELS:yo,SORTING_ORDER:mo}});var tt=O((eu,Fr)=>{"use strict";var{lsCacheSym:go,levelValSym:Ze,useOnlyCustomLevelsSym:po,streamSym:wo,formattersSym:bo,hooksSym:So,levelCompSym:Nr}=G(),{noop:_o,genLog:V}=pe(),{DEFAULT_LEVELS:W,SORTING_ORDER:Rr}=we(),Wr={fatal:e=>{let t=V(W.fatal,e);return function(...r){let n=this[wo];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>V(W.error,e),warn:e=>V(W.warn,e),info:e=>V(W.info,e),debug:e=>V(W.debug,e),trace:e=>V(W.trace,e)},et=Object.keys(W).reduce((e,t)=>(e[W[t]]=t,e),{}),Eo=Object.keys(et).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function Oo(e){let t=e[bo].level,{labels:r}=e.levels,n={};for(let i in r){let s=t(r[i],Number(i));n[i]=JSON.stringify(s).slice(0,-1)}return e[go]=n,e}function xo(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function vo(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Ze],i=this[Ze]=r[e],s=this[po],h=this[Nr],l=this[So].logMethod;for(let f in r){if(h(r[f],i)===!1){this[f]=_o;continue}this[f]=xo(f,s)?Wr[f](l):V(r[f],l)}this.emit("level-change",e,i,t[n],n,this)}function Ao(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function To(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[Nr](r,this[Ze])}function ko(e,t,r){return e===Rr.DESC?t<=r:t>=r}function Lo(e){return typeof e=="string"?ko.bind(null,e):e}function Co(e=null,t=!1){let r=e?Object.keys(e).reduce((s,h)=>(s[e[h]]=h,s),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:et,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:W,e);return{labels:n,values:i}}function jo(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(s=>t[s]),r?[]:Object.keys(et).map(s=>+s),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:W,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function Po(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}function $o(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(Rr).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}Fr.exports={initialLsCache:Eo,genLsCache:Oo,levelMethods:Wr,getLevel:Ao,setLevel:vo,isLevelEnabled:To,mappings:Co,assertNoLevelCollisions:Po,assertDefaultLevelFound:jo,genLevelComparison:Lo,assertLevelComparison:$o}});var rt=O((tu,Mr)=>{"use strict";Mr.exports={version:"10.1.0"}});var Xr=O((nu,Hr)=>{"use strict";var{EventEmitter:Bo}=require("node:events"),{lsCacheSym:Do,levelValSym:Io,setLevelSym:it,getLevelSym:zr,chindingsSym:Se,mixinSym:qo,asJsonSym:Kr,writeSym:No,mixinMergeStrategySym:Ro,timeSym:Wo,timeSliceIndexSym:Fo,streamSym:Ur,serializersSym:K,formattersSym:Z,errorKeySym:Mo,messageKeySym:zo,useOnlyCustomLevelsSym:Vo,needsMetadataGsym:Ko,redactFmtSym:Uo,stringifySym:Jo,formatOptsSym:Go,stringifiersSym:Ho,msgPrefixSym:st,hooksSym:Xo}=G(),{getLevel:Yo,setLevel:Qo,isLevelEnabled:Zo,mappings:el,initialLsCache:tl,genLsCache:rl,assertNoLevelCollisions:nl}=tt(),{asChindings:ot,asJson:il,buildFormatters:nt,stringify:Vr,noop:Jr}=pe(),{version:sl}=rt(),ol=Ie(),ll=class{},Gr={constructor:ll,child:fl,bindings:ul,setBindings:cl,flush:dl,isLevelEnabled:Zo,version:sl,get level(){return this[zr]()},set level(e){this[it](e)},get levelVal(){return this[Io]},set levelVal(e){throw Error("levelVal is read-only")},get msgPrefix(){return this[st]},get[Symbol.toStringTag](){return"Pino"},[Do]:tl,[No]:hl,[Kr]:il,[zr]:Yo,[it]:Qo};Object.setPrototypeOf(Gr,Bo.prototype);Hr.exports=function(){return Object.create(Gr)};var be=e=>e;function fl(e,t){if(!e)throw Error("missing bindings for child Pino");let r=this[K],n=this[Z],i=Object.create(this);if(t==null)return i[Z].bindings!==be&&(i[Z]=nt(n.level,be,n.log)),i[Se]=ot(i,e),this.onChild!==Jr&&this.onChild(i),i;if(t.hasOwnProperty("serializers")===!0){i[K]=Object.create(null);for(let a in r)i[K][a]=r[a];let l=Object.getOwnPropertySymbols(r);for(var s=0;s<l.length;s++){let a=l[s];i[K][a]=r[a]}for(let a in t.serializers)i[K][a]=t.serializers[a];let f=Object.getOwnPropertySymbols(t.serializers);for(var h=0;h<f.length;h++){let a=f[h];i[K][a]=t.serializers[a]}}else i[K]=r;if(t.hasOwnProperty("formatters")){let{level:l,bindings:f,log:a}=t.formatters;i[Z]=nt(l||n.level,f||be,a||n.log)}else i[Z]=nt(n.level,be,n.log);if(t.hasOwnProperty("customLevels")===!0&&(nl(this.levels,t.customLevels),i.levels=el(t.customLevels,i[Vo]),rl(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let l=ol(i.redact,Vr),f={stringify:l[Uo]};i[Jo]=Vr,i[Ho]=l,i[Go]=f}if(typeof t.msgPrefix=="string"&&(i[st]=(this[st]||"")+t.msgPrefix),i[Se]=ot(i,e),t.level!==void 0&&t.level!==this.level||t.hasOwnProperty("customLevels")){let l=t.level||this.level;i[it](l)}return this.onChild(i),i}function ul(){let t=`{${this[Se].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function cl(e){let t=ot(this,e);this[Se]=t}function al(e,t){return Object.assign(t,e)}function hl(e,t,r){let n=this[Wo](),i=this[qo],s=this[Mo],h=this[zo],l=this[Ro]||al,f,a=this[Xo].streamWrite;e==null?f={}:e instanceof Error?(f={[s]:e},t===void 0&&(t=e.message)):(f=e,t===void 0&&e[h]===void 0&&e[s]&&(t=e[s].message)),i&&(f=l(f,i(f,r,this)));let c=this[Kr](f,t,r,n),u=this[Ur];u[Ko]===!0&&(u.lastLevel=r,u.lastObj=f,u.lastMsg=t,u.lastTime=n.slice(this[Fo]),u.lastLogger=this),u.write(a?a(c):c)}function dl(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[Ur];typeof t.flush=="function"?t.flush(e||Jr):e&&e()}});var en=O((ct,Zr)=>{"use strict";var{hasOwnProperty:ee}=Object.prototype,J=ut();J.configure=ut;J.stringify=J;J.default=J;ct.stringify=J;ct.configure=ut;Zr.exports=J;var yl=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function F(e){return e.length<5e3&&!yl.test(e)?`"${e}"`:JSON.stringify(e)}function lt(e,t){if(e.length>200||t)return e.sort(t);for(let r=1;r<e.length;r++){let n=e[r],i=r;for(;i!==0&&e[i-1]>n;)e[i]=e[i-1],i--;e[i]=n}return e}var ml=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function ft(e){return ml.call(e)!==void 0&&e.length!==0}function Yr(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let s=1;s<r;s++)i+=`${t}"${s}":${n}${e[s]}`;return i}function gl(e){if(ee.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function pl(e){let t;if(ee.call(e,"deterministic")&&(t=e.deterministic,typeof t!="boolean"&&typeof t!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return t===void 0?!0:t}function wl(e,t){let r;if(ee.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function Qr(e,t){let r;if(ee.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function U(e){return e===1?"1 item":`${e} items`}function bl(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function Sl(e){if(ee.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function ut(e){e={...e};let t=Sl(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=gl(e),n=wl(e,"bigint"),i=pl(e),s=typeof i=="function"?i:void 0,h=Qr(e,"maximumDepth"),l=Qr(e,"maximumBreadth");function f(y,o,g,p,S,b){let w=o[y];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(y)),w=p.call(o,y,w),typeof w){case"string":return F(w);case"object":{if(w===null)return"null";if(g.indexOf(w)!==-1)return r;let _="",v=",",T=b;if(Array.isArray(w)){if(w.length===0)return"[]";if(h<g.length+1)return'"[Array]"';g.push(w),S!==""&&(b+=S,_+=`
${b}`,v=`,
${b}`);let C=Math.min(w.length,l),$=0;for(;$<C-1;$++){let z=f(String($),w,g,p,S,b);_+=z!==void 0?z:"null",_+=v}let B=f(String($),w,g,p,S,b);if(_+=B!==void 0?B:"null",w.length-1>l){let z=w.length-l-1;_+=`${v}"... ${U(z)} not stringified"`}return S!==""&&(_+=`
${T}`),g.pop(),`[${_}]`}let x=Object.keys(w),A=x.length;if(A===0)return"{}";if(h<g.length+1)return'"[Object]"';let E="",L="";S!==""&&(b+=S,v=`,
${b}`,E=" ");let j=Math.min(A,l);i&&!ft(w)&&(x=lt(x,s)),g.push(w);for(let C=0;C<j;C++){let $=x[C],B=f($,w,g,p,S,b);B!==void 0&&(_+=`${L}${F($)}:${E}${B}`,L=v)}if(A>l){let C=A-l;_+=`${L}"...":${E}"${U(C)} not stringified"`,L=v}return S!==""&&L.length>1&&(_=`
${b}${_}
${T}`),g.pop(),`{${_}}`}case"number":return isFinite(w)?String(w):t?t(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return t?t(w):void 0}}function a(y,o,g,p,S,b){switch(typeof o=="object"&&o!==null&&typeof o.toJSON=="function"&&(o=o.toJSON(y)),typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(g.indexOf(o)!==-1)return r;let w=b,_="",v=",";if(Array.isArray(o)){if(o.length===0)return"[]";if(h<g.length+1)return'"[Array]"';g.push(o),S!==""&&(b+=S,_+=`
${b}`,v=`,
${b}`);let A=Math.min(o.length,l),E=0;for(;E<A-1;E++){let j=a(String(E),o[E],g,p,S,b);_+=j!==void 0?j:"null",_+=v}let L=a(String(E),o[E],g,p,S,b);if(_+=L!==void 0?L:"null",o.length-1>l){let j=o.length-l-1;_+=`${v}"... ${U(j)} not stringified"`}return S!==""&&(_+=`
${w}`),g.pop(),`[${_}]`}g.push(o);let T="";S!==""&&(b+=S,v=`,
${b}`,T=" ");let x="";for(let A of p){let E=a(A,o[A],g,p,S,b);E!==void 0&&(_+=`${x}${F(A)}:${T}${E}`,x=v)}return S!==""&&x.length>1&&(_=`
${b}${_}
${w}`),g.pop(),`{${_}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}function c(y,o,g,p,S){switch(typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(typeof o.toJSON=="function"){if(o=o.toJSON(y),typeof o!="object")return c(y,o,g,p,S);if(o===null)return"null"}if(g.indexOf(o)!==-1)return r;let b=S;if(Array.isArray(o)){if(o.length===0)return"[]";if(h<g.length+1)return'"[Array]"';g.push(o),S+=p;let E=`
${S}`,L=`,
${S}`,j=Math.min(o.length,l),C=0;for(;C<j-1;C++){let B=c(String(C),o[C],g,p,S);E+=B!==void 0?B:"null",E+=L}let $=c(String(C),o[C],g,p,S);if(E+=$!==void 0?$:"null",o.length-1>l){let B=o.length-l-1;E+=`${L}"... ${U(B)} not stringified"`}return E+=`
${b}`,g.pop(),`[${E}]`}let w=Object.keys(o),_=w.length;if(_===0)return"{}";if(h<g.length+1)return'"[Object]"';S+=p;let v=`,
${S}`,T="",x="",A=Math.min(_,l);ft(o)&&(T+=Yr(o,v,l),w=w.slice(o.length),A-=o.length,x=v),i&&(w=lt(w,s)),g.push(o);for(let E=0;E<A;E++){let L=w[E],j=c(L,o[L],g,p,S);j!==void 0&&(T+=`${x}${F(L)}: ${j}`,x=v)}if(_>l){let E=_-l;T+=`${x}"...": "${U(E)} not stringified"`,x=v}return x!==""&&(T=`
${S}${T}
${b}`),g.pop(),`{${T}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}function u(y,o,g){switch(typeof o){case"string":return F(o);case"object":{if(o===null)return"null";if(typeof o.toJSON=="function"){if(o=o.toJSON(y),typeof o!="object")return u(y,o,g);if(o===null)return"null"}if(g.indexOf(o)!==-1)return r;let p="",S=o.length!==void 0;if(S&&Array.isArray(o)){if(o.length===0)return"[]";if(h<g.length+1)return'"[Array]"';g.push(o);let T=Math.min(o.length,l),x=0;for(;x<T-1;x++){let E=u(String(x),o[x],g);p+=E!==void 0?E:"null",p+=","}let A=u(String(x),o[x],g);if(p+=A!==void 0?A:"null",o.length-1>l){let E=o.length-l-1;p+=`,"... ${U(E)} not stringified"`}return g.pop(),`[${p}]`}let b=Object.keys(o),w=b.length;if(w===0)return"{}";if(h<g.length+1)return'"[Object]"';let _="",v=Math.min(w,l);S&&ft(o)&&(p+=Yr(o,",",l),b=b.slice(o.length),v-=o.length,_=","),i&&(b=lt(b,s)),g.push(o);for(let T=0;T<v;T++){let x=b[T],A=u(x,o[x],g);A!==void 0&&(p+=`${_}${F(x)}:${A}`,_=",")}if(w>l){let T=w-l;p+=`${_}"...":"${U(T)} not stringified"`}return g.pop(),`{${p}}`}case"number":return isFinite(o)?String(o):t?t(o):"null";case"boolean":return o===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(o);default:return t?t(o):void 0}}function m(y,o,g){if(arguments.length>1){let p="";if(typeof g=="number"?p=" ".repeat(Math.min(g,10)):typeof g=="string"&&(p=g.slice(0,10)),o!=null){if(typeof o=="function")return f("",{"":y},[],o,p,"");if(Array.isArray(o))return a("",y,[],bl(o),p,"")}if(p.length!==0)return c("",y,[],p,"")}return u("",y,[])}return m}});var sn=O((iu,nn)=>{"use strict";var at=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:rn}=we(),_l=rn.info;function El(e,t){e=e||[],t=t||{dedupe:!1};let r=Object.create(rn);r.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(u=>{r[u]=t.levels[u]});let n={write:i,add:l,remove:f,emit:s,flushSync:h,end:a,minLevel:0,lastId:0,streams:[],clone:c,[at]:!0,streamLevels:r};return Array.isArray(e)?e.forEach(l,n):l.call(n,e),e=null,n;function i(u){let m,y=this.lastLevel,{streams:o}=this,g=0,p;for(let S=Ol(o.length,t.dedupe);vl(S,o.length,t.dedupe);S=xl(S,t.dedupe))if(m=o[S],m.level<=y){if(g!==0&&g!==m.level)break;if(p=m.stream,p[at]){let{lastTime:b,lastMsg:w,lastObj:_,lastLogger:v}=this;p.lastLevel=y,p.lastTime=b,p.lastMsg=w,p.lastObj=_,p.lastLogger=v}p.write(u),t.dedupe&&(g=m.level)}else if(!t.dedupe)break}function s(...u){for(let{stream:m}of this.streams)typeof m.emit=="function"&&m.emit(...u)}function h(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync()}function l(u){if(!u)return n;let m=typeof u.write=="function"||u.stream,y=u.write?u:u.stream;if(!m)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:o,streamLevels:g}=this,p;typeof u.levelVal=="number"?p=u.levelVal:typeof u.level=="string"?p=g[u.level]:typeof u.level=="number"?p=u.level:p=_l;let S={stream:y,level:p,levelVal:void 0,id:++n.lastId};return o.unshift(S),o.sort(tn),this.minLevel=o[0].level,n}function f(u){let{streams:m}=this,y=m.findIndex(o=>o.id===u);return y>=0&&(m.splice(y,1),m.sort(tn),this.minLevel=m.length>0?m[0].level:-1),n}function a(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync(),u.end()}function c(u){let m=new Array(this.streams.length);for(let y=0;y<m.length;y++)m[y]={level:u,stream:this.streams[y].stream};return{write:i,add:l,remove:f,minLevel:u,streams:m,clone:c,emit:s,flushSync:h,[at]:!0}}}function tn(e,t){return e.level-t.level}function Ol(e,t){return t?e-1:0}function xl(e,t){return t?e-1:e+1}function vl(e,t,r){return r?e>=0:e<t}nn.exports=El});var bn=O((su,D)=>{function ht(e){try{let t=require("path"),r=process.cwd(),n=t.resolve(r,"dist/");return t.resolve(n,e.replace(/^\.\//,""))}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":ht("./thread-stream-worker.js"),"pino-worker":ht("./pino-worker.js"),"pino/file":ht("./pino-file.js")};var Al=require("node:os"),dn=Pe(),Tl=$e(),kl=Ie(),yn=Yt(),Ll=Xr(),mn=G(),{configure:Cl}=en(),{assertDefaultLevelFound:jl,mappings:gn,genLsCache:Pl,genLevelComparison:$l,assertLevelComparison:Bl}=tt(),{DEFAULT_LEVELS:pn,SORTING_ORDER:Dl}=we(),{createArgsNormalizer:Il,asChindings:ql,buildSafeSonicBoom:on,buildFormatters:Nl,stringify:dt,normalizeDestFileDescriptor:ln,noop:Rl}=pe(),{version:Wl}=rt(),{chindingsSym:fn,redactFmtSym:Fl,serializersSym:un,timeSym:Ml,timeSliceIndexSym:zl,streamSym:Vl,stringifySym:cn,stringifySafeSym:yt,stringifiersSym:an,setLevelSym:Kl,endSym:Ul,formatOptsSym:Jl,messageKeySym:Gl,errorKeySym:Hl,nestedKeySym:Xl,mixinSym:Yl,levelCompSym:Ql,useOnlyCustomLevelsSym:Zl,formattersSym:hn,hooksSym:ef,nestedKeyStrSym:tf,mixinMergeStrategySym:rf,msgPrefixSym:nf}=mn,{epochTime:wn,nullTime:sf}=yn,{pid:of}=process,lf=Al.hostname(),ff=dn.err,uf={level:"info",levelComparison:Dl.ASC,levels:pn,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:of,hostname:lf},serializers:Object.assign(Object.create(null),{err:ff}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:wn,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},cf=Il(uf),af=Object.assign(Object.create(null),dn);function mt(...e){let t={},{opts:r,stream:n}=cf(t,Tl(),...e);r.level&&typeof r.level=="string"&&pn[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:i,crlf:s,serializers:h,timestamp:l,messageKey:f,errorKey:a,nestedKey:c,base:u,name:m,level:y,customLevels:o,levelComparison:g,mixin:p,mixinMergeStrategy:S,useOnlyCustomLevels:b,formatters:w,hooks:_,depthLimit:v,edgeLimit:T,onChild:x,msgPrefix:A}=r,E=Cl({maximumDepth:v,maximumBreadth:T}),L=Nl(w.level,w.bindings,w.log),j=dt.bind({[yt]:E}),C=i?kl(i,j):{},$=i?{stringify:C[Fl]}:{stringify:j},B="}"+(s?`\r
`:`
`),z=ql.bind(null,{[fn]:"",[un]:h,[an]:C,[cn]:dt,[yt]:E,[hn]:L}),Ee="";u!==null&&(m===void 0?Ee=z(u):Ee=z(Object.assign({},u,{name:m})));let gt=l instanceof Function?l:l?wn:sf,Bn=gt().indexOf(":")+1;if(b&&!o)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(p&&typeof p!="function")throw Error(`Unknown mixin type "${typeof p}" - expected "function"`);if(A&&typeof A!="string")throw Error(`Unknown msgPrefix type "${typeof A}" - expected "string"`);jl(y,o,b);let pt=gn(o,b);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:pt,messageKey:f,errorKey:a}}),Bl(g);let Dn=$l(g);return Object.assign(t,{levels:pt,[Ql]:Dn,[Zl]:b,[Vl]:n,[Ml]:gt,[zl]:Bn,[cn]:dt,[yt]:E,[an]:C,[Ul]:B,[Jl]:$,[Gl]:f,[Hl]:a,[Xl]:c,[tf]:c?`,${JSON.stringify(c)}:{`:"",[un]:h,[Yl]:p,[rf]:S,[fn]:Ee,[hn]:L,[ef]:_,silent:Rl,onChild:x,[nf]:A}),Object.setPrototypeOf(t,Ll()),Pl(t),t[Kl](y),t}D.exports=mt;D.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=ln(e.dest||process.stdout.fd),on(e)):on({dest:ln(e),minLength:0});D.exports.transport=He();D.exports.multistream=sn();D.exports.levels=gn();D.exports.stdSerializers=af;D.exports.stdTimeFunctions=Object.assign({},yn);D.exports.symbols=mn;D.exports.version=Wl;D.exports.default=mt;D.exports.pino=mt});var On=O((ou,En)=>{"use strict";var{Transform:hf}=require("stream"),{StringDecoder:df}=require("string_decoder"),M=Symbol("last"),_e=Symbol("decoder");function yf(e,t,r){let n;if(this.overflow){if(n=this[_e].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[M]+=this[_e].write(e),n=this[M].split(this.matcher);this[M]=n.pop();for(let i=0;i<n.length;i++)try{_n(this,this.mapper(n[i]))}catch(s){return r(s)}if(this.overflow=this[M].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function mf(e){if(this[M]+=this[_e].end(),this[M])try{_n(this,this.mapper(this[M]))}catch(t){return e(t)}e()}function _n(e,t){t!==void 0&&e.push(t)}function Sn(e){return e}function gf(e,t,r){switch(e=e||/\r?\n/,t=t||Sn,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=Sn)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=yf,r.flush=mf,r.readableObjectMode=!0;let n=new hf(r);return n[M]="",n[_e]=new df("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,s){this._writableState.errorEmitted=!1,s(i)},n}En.exports=gf});var kn=O((lu,Tn)=>{"use strict";var xn=Symbol.for("pino.metadata"),pf=On(),{Duplex:wf}=require("stream"),{parentPort:vn,workerData:An}=require("worker_threads");function bf(){let e,t,r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}Tn.exports=function(t,r={}){let n=r.expectPinoConfig===!0&&An?.workerData?.pinoWillSendConfig===!0,i=r.parse==="lines",s=typeof r.parseLine=="function"?r.parseLine:JSON.parse,h=r.close||Sf,l=pf(function(a){let c;try{c=s(a)}catch(u){this.emit("unknown",a,u);return}if(c===null){this.emit("unknown",a,"Null value ignored");return}return typeof c!="object"&&(c={data:c,time:Date.now()}),l[xn]&&(l.lastTime=c.time,l.lastLevel=c.level,l.lastObj=c),i?a:c},{autoDestroy:!0});if(l._destroy=function(a,c){let u=h(a,c);u&&typeof u.then=="function"&&u.then(c,c)},r.expectPinoConfig===!0&&An?.workerData?.pinoWillSendConfig!==!0&&setImmediate(()=>{l.emit("error",new Error("This transport is not compatible with the current version of pino. Please upgrade pino to the latest version."))}),r.metadata!==!1&&(l[xn]=!0,l.lastTime=0,l.lastLevel=0,l.lastObj=null),n){let a={},c=bf();return vn.on("message",function u(m){m.code==="PINO_CONFIG"&&(a=m.config,c.resolve(),vn.off("message",u))}),Object.defineProperties(l,{levels:{get(){return a.levels}},messageKey:{get(){return a.messageKey}},errorKey:{get(){return a.errorKey}}}),c.then(f)}return f();function f(){let a=t(l);if(a&&typeof a.catch=="function")a.catch(c=>{l.destroy(c)}),a=null;else if(r.enablePipelining&&a)return wf.from({writable:l,readable:a});return l}};function Sf(e,t){process.nextTick(t,e)}});var Cn=O((fu,Ln)=>{var _f=new Function("modulePath","return import(modulePath)");function Ef(e){return typeof __non_webpack__require__=="function"?__non_webpack__require__(e):require(e)}Ln.exports={realImport:_f,realRequire:Ef}});var Pn=O((uu,jn)=>{"use strict";var{realImport:Of,realRequire:te}=Cn();jn.exports=xf;async function xf(e){let t;try{let r=e.startsWith("file://")?e:"file://"+e;r.endsWith(".ts")||r.endsWith(".cts")?(process[Symbol.for("ts-node.register.instance")]?te("ts-node/register"):process.env&&process.env.TS_NODE_DEV&&te("ts-node-dev"),t=te(decodeURIComponent(e))):t=await Of(r)}catch(r){if(r.code==="ENOTDIR"||r.code==="ERR_MODULE_NOT_FOUND")t=te(e);else if(r.code===void 0||r.code==="ERR_VM_DYNAMIC_IMPORT_CALLBACK_MISSING")try{t=te(decodeURIComponent(e))}catch{throw r}else throw r}if(typeof t=="object"&&(t=t.default),typeof t=="object"&&(t=t.default),typeof t!="function")throw Error("exported worker is not a function");return t}});var vf=require("node:events"),{pipeline:Af,PassThrough:Tf}=require("node:stream"),kf=bn(),Lf=kn(),$n=Pn();module.exports=async function({targets:e,pipelines:t,levels:r,dedupe:n}){let i=[];if(e&&e.length&&(e=await Promise.all(e.map(async l=>{let a=await(await $n(l.target))(l.options);return{level:l.level,stream:a}})),i.push(...e)),t&&t.length&&(t=await Promise.all(t.map(async l=>{let f,a=await Promise.all(l.map(async c=>(f=c.level,await(await $n(c.target))(c.options))));return{level:f,stream:h(a)}})),i.push(...t)),i.length===1)return i[0].stream;return Lf(s,{parse:"lines",metadata:!0,close(l,f){let a=0;for(let u of i)a++,u.stream.on("close",c),u.stream.end();function c(){--a===0&&f(l)}}});function s(l){let f=kf.multistream(i,{levels:r,dedupe:n});l.on("data",function(a){let{lastTime:c,lastMsg:u,lastObj:m,lastLevel:y}=this;f.lastLevel=y,f.lastTime=c,f.lastMsg=u,f.lastObj=m,f.write(a+`
`)})}function h(l){let f=new vf,a=new Tf({autoDestroy:!0,destroy(c,u){f.on("error",u),f.on("closed",u)}});return Af(a,...l,function(c){if(c&&c.code!=="ERR_STREAM_PREMATURE_CLOSE"){f.emit("error",c);return}f.emit("closed")}),a}};
