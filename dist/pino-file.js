"use strict";var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _e=O((Yl,pt)=>{"use strict";var X=e=>e&&typeof e.message=="string",Se=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let n=e.cause();return X(n)?n:void 0}else return X(t)?t:void 0},gt=(e,t)=>{if(!X(e))return"";let n=e.stack||"";if(t.has(e))return n+`
causes have become circular...`;let r=Se(e);return r?(t.add(e),n+`
caused by: `+gt(r,t)):n},wr=e=>gt(e,new Set),mt=(e,t,n)=>{if(!X(e))return"";let r=n?"":e.message||"";if(t.has(e))return r+": ...";let i=Se(e);if(i){t.add(e);let o=typeof e.cause=="function";return r+(o?"":": ")+mt(i,t,o)}else return r},Sr=e=>mt(e,new Set);pt.exports={isErrorLike:X,getErrorCause:Se,stackWithCauses:wr,messageWithCauses:Sr}});var Ee=O((Ql,wt)=>{"use strict";var _r=Symbol("circular-ref-tag"),ee=Symbol("pino-raw-err-ref"),bt=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[ee]},set:function(e){this[ee]=e}}});Object.defineProperty(bt,ee,{writable:!0,value:{}});wt.exports={pinoErrProto:bt,pinoErrorSymbols:{seen:_r,rawSymbol:ee}}});var Et=O((Zl,_t)=>{"use strict";_t.exports=xe;var{messageWithCauses:Er,stackWithCauses:Or,isErrorLike:St}=_e(),{pinoErrProto:xr,pinoErrorSymbols:vr}=Ee(),{seen:Oe}=vr,{toString:Ar}=Object.prototype;function xe(e){if(!St(e))return e;e[Oe]=void 0;let t=Object.create(xr);t.type=Ar.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=Er(e),t.stack=Or(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(n=>xe(n)));for(let n in e)if(t[n]===void 0){let r=e[n];St(r)?n!=="cause"&&!Object.prototype.hasOwnProperty.call(r,Oe)&&(t[n]=xe(r)):t[n]=r}return delete e[Oe],t.raw=e,t}});var xt=O((ef,Ot)=>{"use strict";Ot.exports=ne;var{isErrorLike:ve}=_e(),{pinoErrProto:kr,pinoErrorSymbols:Tr}=Ee(),{seen:te}=Tr,{toString:Lr}=Object.prototype;function ne(e){if(!ve(e))return e;e[te]=void 0;let t=Object.create(kr);t.type=Lr.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(n=>ne(n))),ve(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,te)&&(t.cause=ne(e.cause));for(let n in e)if(t[n]===void 0){let r=e[n];ve(r)?Object.prototype.hasOwnProperty.call(r,te)||(t[n]=ne(r)):t[n]=r}return delete e[te],t.raw=e,t}});var Tt=O((tf,kt)=>{"use strict";kt.exports={mapHttpRequest:Cr,reqSerializer:At};var Ae=Symbol("pino-raw-req-ref"),vt=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Ae]},set:function(e){this[Ae]=e}}});Object.defineProperty(vt,Ae,{writable:!0,value:{}});function At(e){let t=e.info||e.socket,n=Object.create(vt);if(n.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),n.method=e.method,e.originalUrl)n.url=e.originalUrl;else{let r=e.path;n.url=typeof r=="string"?r:e.url?e.url.path||e.url:void 0}return e.query&&(n.query=e.query),e.params&&(n.params=e.params),n.headers=e.headers,n.remoteAddress=t&&t.remoteAddress,n.remotePort=t&&t.remotePort,n.raw=e.raw||e,n}function Cr(e){return{req:At(e)}}});var $t=O((nf,jt)=>{"use strict";jt.exports={mapHttpResponse:jr,resSerializer:Ct};var ke=Symbol("pino-raw-res-ref"),Lt=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[ke]},set:function(e){this[ke]=e}}});Object.defineProperty(Lt,ke,{writable:!0,value:{}});function Ct(e){let t=Object.create(Lt);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function jr(e){return{res:Ct(e)}}});var Le=O((rf,Bt)=>{"use strict";var Te=Et(),$r=xt(),re=Tt(),ie=$t();Bt.exports={err:Te,errWithCause:$r,mapHttpRequest:re.mapHttpRequest,mapHttpResponse:ie.mapHttpResponse,req:re.reqSerializer,res:ie.resSerializer,wrapErrorSerializer:function(t){return t===Te?t:function(r){return t(Te(r))}},wrapRequestSerializer:function(t){return t===re.reqSerializer?t:function(r){return t(re.reqSerializer(r))}},wrapResponseSerializer:function(t){return t===ie.resSerializer?t:function(r){return t(ie.resSerializer(r))}}}});var Ce=O((sf,Pt)=>{"use strict";function Br(e,t){return t}Pt.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=Br;let n=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(n))return;let r=n.slice(2),i=[];for(let o of r)o&&i.push(o.getFileName());return i}});var Wt=O((of,Rt)=>{"use strict";function je(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];for(let n=0;n<e.length;n++)t[n]=je(e[n]);return t}if(typeof e=="object"){let t=Object.create(Object.getPrototypeOf(e));for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=je(e[n]));return t}return e}function It(e){let t=[],n="",r=!1,i=!1,o="";for(let c=0;c<e.length;c++){let f=e[c];!r&&f==="."?n&&(t.push(n),n=""):f==="["?(n&&(t.push(n),n=""),r=!0):f==="]"&&r?(t.push(n),n="",r=!1,i=!1):(f==='"'||f==="'")&&r?i?f===o?(i=!1,o=""):n+=f:(i=!0,o=f):n+=f}return n&&t.push(n),t}function Dt(e,t,n){let r=e;for(let o=0;o<t.length-1;o++){let c=t[o];if(typeof r!="object"||r===null||!(c in r)||typeof r[c]!="object"||r[c]===null)return!1;r=r[c]}let i=t[t.length-1];if(i==="*"){if(Array.isArray(r))for(let o=0;o<r.length;o++)r[o]=n;else if(typeof r=="object"&&r!==null)for(let o in r)Object.prototype.hasOwnProperty.call(r,o)&&(r[o]=n)}else typeof r=="object"&&r!==null&&i in r&&Object.prototype.hasOwnProperty.call(r,i)&&(r[i]=n);return!0}function Nt(e,t){let n=e;for(let i=0;i<t.length-1;i++){let o=t[i];if(typeof n!="object"||n===null||!(o in n)||typeof n[o]!="object"||n[o]===null)return!1;n=n[o]}let r=t[t.length-1];if(r==="*"){if(Array.isArray(n))for(let i=0;i<n.length;i++)n[i]=void 0;else if(typeof n=="object"&&n!==null)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i]}else typeof n=="object"&&n!==null&&r in n&&Object.prototype.hasOwnProperty.call(n,r)&&delete n[r];return!0}var se=Symbol("PATH_NOT_FOUND");function Pr(e,t){let n=e;for(let r of t){if(n==null||typeof n!="object"||n===null||!(r in n))return se;n=n[r]}return n}function Ir(e,t){let n=e;for(let r of t){if(n==null||typeof n!="object"||n===null)return;n=n[r]}return n}function Dr(e,t,n,r=!1){for(let i of t){let o=It(i);if(o.includes("*"))qt(e,o,n,i,r);else if(r)Nt(e,o);else{let c=Pr(e,o);if(c===se)continue;let f=typeof n=="function"?n(c,o):n;Dt(e,o,f)}}}function qt(e,t,n,r,i=!1){let o=t.indexOf("*");if(o===t.length-1){let c=t.slice(0,-1),f=e;for(let l of c){if(f==null||typeof f!="object"||f===null)return;f=f[l]}if(Array.isArray(f))if(i)for(let l=0;l<f.length;l++)f[l]=void 0;else for(let l=0;l<f.length;l++){let h=[...c,l.toString()],d=typeof n=="function"?n(f[l],h):n;f[l]=d}else if(typeof f=="object"&&f!==null)if(i){let l=[];for(let h in f)Object.prototype.hasOwnProperty.call(f,h)&&l.push(h);for(let h of l)delete f[h]}else for(let l in f){let h=[...c,l],d=typeof n=="function"?n(f[l],h):n;f[l]=d}}else Nr(e,t,n,o,r,i)}function Nr(e,t,n,r,i,o=!1){let c=t.slice(0,r),f=t.slice(r+1),l=[];function h(d,u){if(u===c.length){if(Array.isArray(d))for(let m=0;m<d.length;m++)l[u]=m.toString(),h(d[m],u+1);else if(typeof d=="object"&&d!==null)for(let m in d)l[u]=m,h(d[m],u+1)}else if(u<c.length){let m=c[u];d&&typeof d=="object"&&d!==null&&m in d&&(l[u]=m,h(d[m],u+1))}else if(f.includes("*"))qt(d,f,typeof n=="function"?(y,s)=>{let g=[...l.slice(0,u),...s];return n(y,g)}:n,i,o);else if(o)Nt(d,f);else{let m=typeof n=="function"?n(Ir(d,f),[...l.slice(0,u),...f]):n;Dt(d,f,m)}}if(c.length===0)h(e,0);else{let d=e;for(let u=0;u<c.length;u++){let m=c[u];if(d==null||typeof d!="object"||d===null)return;d=d[m],l[u]=m}d!=null&&h(d,c.length)}}function qr(e){if(e.length===0)return null;let t=new Map;for(let n of e){let r=It(n),i=t;for(let o=0;o<r.length;o++){let c=r[o];i.has(c)||i.set(c,new Map),i=i.get(c)}}return t}function Rr(e,t){if(!t)return e;function n(r,i,o=0){if(!i||i.size===0||r===null||typeof r!="object")return r;if(r instanceof Date)return new Date(r.getTime());if(Array.isArray(r)){let f=[];for(let l=0;l<r.length;l++){let h=l.toString();i.has(h)||i.has("*")?f[l]=n(r[l],i.get(h)||i.get("*")):f[l]=r[l]}return f}let c=Object.create(Object.getPrototypeOf(r));for(let f in r)Object.prototype.hasOwnProperty.call(r,f)&&(i.has(f)||i.has("*")?c[f]=n(r[f],i.get(f)||i.get("*")):c[f]=r[f]);return c}return n(e,t)}function Wr(e){if(typeof e!="string")throw new Error("Paths must be (non-empty) strings");if(e==="")throw new Error("Invalid redaction path ()");if(e.includes(".."))throw new Error(`Invalid redaction path (${e})`);if(e.includes(","))throw new Error(`Invalid redaction path (${e})`);let t=0,n=!1,r="";for(let i=0;i<e.length;i++){let o=e[i];if((o==='"'||o==="'")&&t>0)n?o===r&&(n=!1,r=""):(n=!0,r=o);else if(o==="["&&!n)t++;else if(o==="]"&&!n&&(t--,t<0))throw new Error(`Invalid redaction path (${e})`)}if(t!==0)throw new Error(`Invalid redaction path (${e})`)}function Fr(e){if(!Array.isArray(e))throw new TypeError("paths must be an array");for(let t of e)Wr(t)}function zr(e={}){let{paths:t=[],censor:n="[REDACTED]",serialize:r=JSON.stringify,strict:i=!0,remove:o=!1}=e;Fr(t);let c=qr(t);return function(l){if(i&&(l===null||typeof l!="object")&&(l==null||typeof l!="object"))return r?r(l):l;let h=Rr(l,c),d=l,u=n;return typeof n=="function"&&(u=n),Dr(h,t,u,o),r===!1?(h.restore=function(){return je(d)},h):typeof r=="function"?r(h):JSON.stringify(h)}}Rt.exports=zr});var J=O((lf,Ft)=>{"use strict";var Mr=Symbol("pino.setLevel"),Vr=Symbol("pino.getLevel"),Kr=Symbol("pino.levelVal"),Ur=Symbol("pino.levelComp"),Jr=Symbol("pino.useLevelLabels"),Gr=Symbol("pino.useOnlyCustomLevels"),Hr=Symbol("pino.mixin"),Xr=Symbol("pino.lsCache"),Yr=Symbol("pino.chindings"),Qr=Symbol("pino.asJson"),Zr=Symbol("pino.write"),ei=Symbol("pino.redactFmt"),ti=Symbol("pino.time"),ni=Symbol("pino.timeSliceIndex"),ri=Symbol("pino.stream"),ii=Symbol("pino.stringify"),si=Symbol("pino.stringifySafe"),oi=Symbol("pino.stringifiers"),li=Symbol("pino.end"),fi=Symbol("pino.formatOpts"),ui=Symbol("pino.messageKey"),ci=Symbol("pino.errorKey"),ai=Symbol("pino.nestedKey"),hi=Symbol("pino.nestedKeyStr"),di=Symbol("pino.mixinMergeStrategy"),yi=Symbol("pino.msgPrefix"),gi=Symbol("pino.wildcardFirst"),mi=Symbol.for("pino.serializers"),pi=Symbol.for("pino.formatters"),bi=Symbol.for("pino.hooks"),wi=Symbol.for("pino.metadata");Ft.exports={setLevelSym:Mr,getLevelSym:Vr,levelValSym:Kr,levelCompSym:Ur,useLevelLabelsSym:Jr,mixinSym:Hr,lsCacheSym:Xr,chindingsSym:Yr,asJsonSym:Qr,writeSym:Zr,serializersSym:mi,redactFmtSym:ei,timeSym:ti,timeSliceIndexSym:ni,streamSym:ri,stringifySym:ii,stringifySafeSym:si,stringifiersSym:oi,endSym:li,formatOptsSym:fi,messageKeySym:ui,errorKeySym:ci,nestedKeySym:ai,wildcardFirstSym:gi,needsMetadataGsym:wi,useOnlyCustomLevelsSym:Gr,formattersSym:pi,hooksSym:bi,nestedKeyStrSym:hi,mixinMergeStrategySym:di,msgPrefixSym:yi}});var Be=O((ff,Kt)=>{"use strict";var zt=Wt(),{redactFmtSym:Si,wildcardFirstSym:oe}=J(),$e=/[^.[\]]+|\[([^[\]]*?)\]/g,Mt="[Redacted]",Vt=!1;function _i(e,t){let{paths:n,censor:r,remove:i}=Ei(e),o=n.reduce((l,h)=>{$e.lastIndex=0;let d=$e.exec(h),u=$e.exec(h),m=d[1]!==void 0?d[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):d[0];if(m==="*"&&(m=oe),u===null)return l[m]=null,l;if(l[m]===null)return l;let{index:y}=u,s=`${h.substr(y,h.length-1)}`;return l[m]=l[m]||[],m!==oe&&l[m].length===0&&l[m].push(...l[oe]||[]),m===oe&&Object.keys(l).forEach(function(g){l[g]&&l[g].push(s)}),l[m].push(s),l},{}),c={[Si]:zt({paths:n,censor:r,serialize:t,strict:Vt,remove:i})},f=(...l)=>t(typeof r=="function"?r(...l):r);return[...Object.keys(o),...Object.getOwnPropertySymbols(o)].reduce((l,h)=>{if(o[h]===null)l[h]=d=>f(d,[h]);else{let d=typeof r=="function"?(u,m)=>r(u,[h,...m]):r;l[h]=zt({paths:o[h],censor:d,serialize:t,strict:Vt,remove:i})}return l},c)}function Ei(e){if(Array.isArray(e))return e={paths:e,censor:Mt},e;let{paths:t,censor:n=Mt,remove:r}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return r===!0&&(n=void 0),{paths:t,censor:n,remove:r}}Kt.exports=_i});var Gt=O((uf,Jt)=>{"use strict";var Oi=()=>"",xi=()=>`,"time":${Date.now()}`,vi=()=>`,"time":${Math.round(Date.now()/1e3)}`,Ai=()=>`,"time":"${new Date(Date.now()).toISOString()}"`,ki=1000000n,Ut=1000000000n,Ti=BigInt(Date.now())*ki,Li=process.hrtime.bigint(),Ci=()=>{let e=process.hrtime.bigint()-Li,t=Ti+e,n=t/Ut,r=t%Ut,i=Number(n*1000n+r/1000000n),o=new Date(i),c=o.getUTCFullYear(),f=(o.getUTCMonth()+1).toString().padStart(2,"0"),l=o.getUTCDate().toString().padStart(2,"0"),h=o.getUTCHours().toString().padStart(2,"0"),d=o.getUTCMinutes().toString().padStart(2,"0"),u=o.getUTCSeconds().toString().padStart(2,"0");return`,"time":"${c}-${f}-${l}T${h}:${d}:${u}.${r.toString().padStart(9,"0")}Z"`};Jt.exports={nullTime:Oi,epochTime:xi,unixTime:vi,isoTime:Ai,isoTimeNano:Ci}});var Xt=O((cf,Ht)=>{"use strict";function ji(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Ht.exports=$i;function $i(e,t,n){var r=n&&n.stringify||ji,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var c=new Array(o);c[0]=r(e);for(var f=1;f<o;f++)c[f]=r(t[f]);return c.join(" ")}if(typeof e!="string")return e;var l=t.length;if(l===0)return e;for(var h="",d=1-i,u=-1,m=e&&e.length||0,y=0;y<m;){if(e.charCodeAt(y)===37&&y+1<m){switch(u=u>-1?u:0,e.charCodeAt(y+1)){case 100:case 102:if(d>=l||t[d]==null)break;u<y&&(h+=e.slice(u,y)),h+=Number(t[d]),u=y+2,y++;break;case 105:if(d>=l||t[d]==null)break;u<y&&(h+=e.slice(u,y)),h+=Math.floor(Number(t[d])),u=y+2,y++;break;case 79:case 111:case 106:if(d>=l||t[d]===void 0)break;u<y&&(h+=e.slice(u,y));var s=typeof t[d];if(s==="string"){h+="'"+t[d]+"'",u=y+2,y++;break}if(s==="function"){h+=t[d].name||"<anonymous>",u=y+2,y++;break}h+=r(t[d]),u=y+2,y++;break;case 115:if(d>=l)break;u<y&&(h+=e.slice(u,y)),h+=String(t[d]),u=y+2,y++;break;case 37:u<y&&(h+=e.slice(u,y)),h+="%",u=y+2,y++,d--;break}++d}++y}return u===-1?e:(u<m&&(h+=e.slice(u)),h)}});var Ie=O((af,Pe)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(n){if((n>0&&n<1/0)===!1)throw typeof n!="number"&&typeof n!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(n))},e=new Int32Array(new SharedArrayBuffer(4));Pe.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let r=Date.now()+Number(t);for(;r>Date.now(););};Pe.exports=e}});var sn=O((hf,rn)=>{"use strict";var T=require("fs"),Bi=require("events"),Pi=require("util").inherits,Yt=require("path"),Ne=Ie(),Ii=require("assert"),le=100,fe=Buffer.allocUnsafe(0),Di=16*1024,Qt="buffer",Zt="utf8",[Ni,qi]=(process.versions.node||"0.0").split(".").map(Number),Ri=Ni>=22&&qi>=7;function en(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function n(o,c){if(o){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",o)}):t.emit("error",o);return}let f=t._reopening;t.fd=c,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():f&&process.nextTick(()=>t.emit("drain")))}let r=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&T.mkdirSync(Yt.dirname(e),{recursive:!0});let o=T.openSync(e,r,i);n(null,o)}catch(o){throw n(o),o}else t.mkdir?T.mkdir(Yt.dirname(e),{recursive:!0},o=>{if(o)return n(o);T.open(e,r,i,n)}):T.open(e,r,i,n)}function D(e){if(!(this instanceof D))return new D(e);let{fd:t,dest:n,minLength:r,maxLength:i,maxWrite:o,periodicFlush:c,sync:f,append:l=!0,mkdir:h,retryEAGAIN:d,fsync:u,contentMode:m,mode:y}=e||{};t=t||n,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(r||0,16387),this.file=null,this.destroyed=!1,this.minLength=r||0,this.maxLength=i||0,this.maxWrite=o||Di,this._periodicFlush=c||0,this._periodicFlushTimer=void 0,this.sync=f||!1,this.writable=!0,this._fsync=u||!1,this.append=l||!1,this.mode=y,this.retryEAGAIN=d||(()=>!0),this.mkdir=h||!1;let s,g;if(m===Qt)this._writingBuf=fe,this.write=zi,this.flush=Vi,this.flushSync=Ui,this._actualWrite=Gi,s=()=>T.writeSync(this.fd,this._writingBuf),g=()=>T.write(this.fd,this._writingBuf,this.release);else if(m===void 0||m===Zt)this._writingBuf="",this.write=Fi,this.flush=Mi,this.flushSync=Ki,this._actualWrite=Ji,s=()=>T.writeSync(this.fd,this._writingBuf,"utf8"),g=()=>T.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${Zt}" and "${Qt}", but passed ${m}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")en(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(p,S)=>{if(p){if((p.code==="EAGAIN"||p.code==="EBUSY")&&this.retryEAGAIN(p,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Ne(le),this.release(void 0,0)}catch(_){this.release(_)}else setTimeout(g,le);else this._writing=!1,this.emit("error",p);return}this.emit("write",S);let w=De(this._writingBuf,this._len,S);if(this._len=w.len,this._writingBuf=w.writingBuf,this._writingBuf.length){if(!this.sync){g();return}try{do{let _=s(),v=De(this._writingBuf,this._len,_);this._len=v.len,this._writingBuf=v.writingBuf}while(this._writingBuf.length)}catch(_){this.release(_);return}}this._fsync&&T.fsyncSync(this.fd);let b=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):b>this.minLength?this._actualWrite():this._ending?b>0?this._actualWrite():(this._writing=!1,ue(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(Wi,this)):this.emit("drain"))},this.on("newListener",function(p){p==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function De(e,t,n){return typeof e=="string"&&Buffer.byteLength(e)!==n&&(n=Buffer.from(e).subarray(0,n).toString().length),t=Math.max(t-n,0),e=e.slice(n),{writingBuf:e,len:t}}function Wi(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}Pi(D,Bi);function tn(e,t){return e.length===0?fe:e.length===1?e[0]:Buffer.concat(e,t)}function Fi(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,n=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(n.length===0||n[n.length-1].length+e.length>this.maxWrite?n.push(""+e):n[n.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function zi(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,n=this._bufs,r=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(n.length===0||r[r.length-1]+e.length>this.maxWrite?(n.push([e]),r.push(e.length)):(n[n.length-1].push(e),r[r.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function nn(e){this._flushPending=!0;let t=()=>{if(this._fsync)this._flushPending=!1,e();else try{T.fsync(this.fd,r=>{this._flushPending=!1,e(r)})}catch(r){e(r)}this.off("error",n)},n=r=>{this._flushPending=!1,e(r),this.off("drain",t)};this.once("drain",t),this.once("error",n)}function Mi(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&nn.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function Vi(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&nn.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}D.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&T.close(t,n=>{if(n)return this.emit("error",n)})}),en(this.file,this)};D.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():ue(this)))};function Ki(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=T.writeSync(this.fd,e,"utf8"),n=De(e,this._len,t);e=n.writingBuf,this._len=n.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Ne(le)}}try{T.fsyncSync(this.fd)}catch{}}function Ui(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=fe);let e=fe;for(;this._bufs.length||e.length;){e.length<=0&&(e=tn(this._bufs[0],this._lens[0]));try{let t=T.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Ne(le)}}}D.prototype.destroy=function(){this.destroyed||ue(this)};function Ji(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=T.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else T.write(this.fd,this._writingBuf,"utf8",e)}function Gi(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:tn(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=T.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else Ri&&(this._writingBuf=Buffer.from(this._writingBuf)),T.write(this.fd,this._writingBuf,e)}function ue(e){if(e.fd===-1){e.once("ready",ue.bind(null,e));return}e._periodicFlushTimer!==void 0&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],Ii(typeof e.fd=="number",`sonic.fd must be a number, got ${typeof e.fd}`);try{T.fsync(e.fd,t)}catch{}function t(){e.fd!==1&&e.fd!==2?T.close(e.fd,n):n()}function n(r){if(r){e.emit("error",r);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}D.SonicBoom=D;D.default=D;rn.exports=D});var qe=O((df,cn)=>{"use strict";var N={exit:[],beforeExit:[]},on={exit:Yi,beforeExit:Qi},G;function Hi(){G===void 0&&(G=new FinalizationRegistry(Zi))}function Xi(e){N[e].length>0||process.on(e,on[e])}function ln(e){N[e].length>0||(process.removeListener(e,on[e]),N.exit.length===0&&N.beforeExit.length===0&&(G=void 0))}function Yi(){fn("exit")}function Qi(){fn("beforeExit")}function fn(e){for(let t of N[e]){let n=t.deref(),r=t.fn;n!==void 0&&r(n,e)}N[e]=[]}function Zi(e){for(let t of["exit","beforeExit"]){let n=N[t].indexOf(e);N[t].splice(n,n+1),ln(t)}}function un(e,t,n){if(t===void 0)throw new Error("the object can't be undefined");Xi(e);let r=new WeakRef(t);r.fn=n,Hi(),G.register(t,r),N[e].push(r)}function es(e,t){un("exit",e,t)}function ts(e,t){un("beforeExit",e,t)}function ns(e){if(G!==void 0){G.unregister(e);for(let t of["exit","beforeExit"])N[t]=N[t].filter(n=>{let r=n.deref();return r&&r!==e}),ln(t)}}cn.exports={register:es,registerBeforeExit:ts,unregister:ns}});var an=O((yf,rs)=>{rs.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var dn=O((gf,hn)=>{"use strict";function is(e,t,n,r,i){let o=Date.now()+r,c=Atomics.load(e,t);if(c===n){i(null,"ok");return}let f=c,l=h=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{f=c,c=Atomics.load(e,t),c===f?l(h>=1e3?1e3:h*2):c===n?i(null,"ok"):i(null,"not-equal")},h)};l(1)}function ss(e,t,n,r,i){let o=Date.now()+r,c=Atomics.load(e,t);if(c!==n){i(null,"ok");return}let f=l=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{c=Atomics.load(e,t),c!==n?i(null,"ok"):f(l>=1e3?1e3:l*2)},l)};f(1)}hn.exports={wait:is,waitDiff:ss}});var gn=O((mf,yn)=>{"use strict";yn.exports={WRITE_INDEX:4,READ_INDEX:8}});var Sn=O((pf,wn)=>{"use strict";var{version:os}=an(),{EventEmitter:ls}=require("events"),{Worker:fs}=require("worker_threads"),{join:us}=require("path"),{pathToFileURL:cs}=require("url"),{wait:as}=dn(),{WRITE_INDEX:$,READ_INDEX:q}=gn(),hs=require("buffer"),ds=require("assert"),a=Symbol("kImpl"),ys=hs.constants.MAX_STRING_LENGTH,Y=class{constructor(t){this._value=t}deref(){return this._value}},ae=class{register(){}unregister(){}},gs=process.env.NODE_V8_COVERAGE?ae:global.FinalizationRegistry||ae,ms=process.env.NODE_V8_COVERAGE?Y:global.WeakRef||Y,mn=new gs(e=>{e.exited||e.terminate()});function ps(e,t){let{filename:n,workerData:r}=t,o=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||us(__dirname,"lib","worker.js"),c=new fs(o,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:n.indexOf("file://")===0?n:cs(n).href,dataBuf:e[a].dataBuf,stateBuf:e[a].stateBuf,workerData:{$context:{threadStreamVersion:os},...r}}});return c.stream=new Y(e),c.on("message",bs),c.on("exit",bn),mn.register(e,c),c}function pn(e){ds(!e[a].sync),e[a].needDrain&&(e[a].needDrain=!1,e.emit("drain"))}function ce(e){let t=Atomics.load(e[a].state,$),n=e[a].data.length-t;if(n>0){if(e[a].buf.length===0){e[a].flushing=!1,e[a].ending?Me(e):e[a].needDrain&&process.nextTick(pn,e);return}let r=e[a].buf.slice(0,n),i=Buffer.byteLength(r);i<=n?(e[a].buf=e[a].buf.slice(n),he(e,r,ce.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[a].state,q,0),Atomics.store(e[a].state,$,0);i>e[a].data.length;)n=n/2,r=e[a].buf.slice(0,n),i=Buffer.byteLength(r);e[a].buf=e[a].buf.slice(n),he(e,r,ce.bind(null,e))}})}else if(n===0){if(t===0&&e[a].buf.length===0)return;e.flush(()=>{Atomics.store(e[a].state,q,0),Atomics.store(e[a].state,$,0),ce(e)})}else R(e,new Error("overwritten"))}function bs(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new ms(t),t.flush(()=>{t[a].ready=!0,t.emit("ready")});break;case"ERROR":R(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:R(t,new Error("this should not happen: "+e.code))}}function bn(e){let t=this.stream.deref();t!==void 0&&(mn.unregister(t),t.worker.exited=!0,t.worker.off("exit",bn),R(t,e!==0?new Error("the worker thread exited"):null))}var We=class extends ls{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[a]={},this[a].stateBuf=new SharedArrayBuffer(128),this[a].state=new Int32Array(this[a].stateBuf),this[a].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[a].data=Buffer.from(this[a].dataBuf),this[a].sync=t.sync||!1,this[a].ending=!1,this[a].ended=!1,this[a].needDrain=!1,this[a].destroyed=!1,this[a].flushing=!1,this[a].ready=!1,this[a].finished=!1,this[a].errored=null,this[a].closed=!1,this[a].buf="",this.worker=ps(this,t),this.on("message",(n,r)=>{this.worker.postMessage(n,r)})}write(t){if(this[a].destroyed)return Fe(this,new Error("the worker has exited")),!1;if(this[a].ending)return Fe(this,new Error("the worker is ending")),!1;if(this[a].flushing&&this[a].buf.length+t.length>=ys)try{Re(this),this[a].flushing=!0}catch(n){return R(this,n),!1}if(this[a].buf+=t,this[a].sync)try{return Re(this),!0}catch(n){return R(this,n),!1}return this[a].flushing||(this[a].flushing=!0,setImmediate(ce,this)),this[a].needDrain=this[a].data.length-this[a].buf.length-Atomics.load(this[a].state,$)<=0,!this[a].needDrain}end(){this[a].destroyed||(this[a].ending=!0,Me(this))}flush(t){if(this[a].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let n=Atomics.load(this[a].state,$);as(this[a].state,q,n,1/0,(r,i)=>{if(r){R(this,r),process.nextTick(t,r);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[a].destroyed||(Re(this),ze(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[a].ready}get destroyed(){return this[a].destroyed}get closed(){return this[a].closed}get writable(){return!this[a].destroyed&&!this[a].ending}get writableEnded(){return this[a].ending}get writableFinished(){return this[a].finished}get writableNeedDrain(){return this[a].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[a].errored}};function Fe(e,t){setImmediate(()=>{e.emit("error",t)})}function R(e,t){e[a].destroyed||(e[a].destroyed=!0,t&&(e[a].errored=t,Fe(e,t)),e.worker.exited?setImmediate(()=>{e[a].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[a].closed=!0,e.emit("close")}))}function he(e,t,n){let r=Atomics.load(e[a].state,$),i=Buffer.byteLength(t);return e[a].data.write(t,r),Atomics.store(e[a].state,$,r+i),Atomics.notify(e[a].state,$),n(),!0}function Me(e){if(!(e[a].ended||!e[a].ending||e[a].flushing)){e[a].ended=!0;try{e.flushSync();let t=Atomics.load(e[a].state,q);Atomics.store(e[a].state,$,-1),Atomics.notify(e[a].state,$);let n=0;for(;t!==-1;){if(Atomics.wait(e[a].state,q,t,1e3),t=Atomics.load(e[a].state,q),t===-2){R(e,new Error("end() failed"));return}if(++n===10){R(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[a].finished=!0,e.emit("finish")})}catch(t){R(e,t)}}}function Re(e){let t=()=>{e[a].ending?Me(e):e[a].needDrain&&process.nextTick(pn,e)};for(e[a].flushing=!1;e[a].buf.length!==0;){let n=Atomics.load(e[a].state,$),r=e[a].data.length-n;if(r===0){ze(e),Atomics.store(e[a].state,q,0),Atomics.store(e[a].state,$,0);continue}else if(r<0)throw new Error("overwritten");let i=e[a].buf.slice(0,r),o=Buffer.byteLength(i);if(o<=r)e[a].buf=e[a].buf.slice(r),he(e,i,t);else{for(ze(e),Atomics.store(e[a].state,q,0),Atomics.store(e[a].state,$,0);o>e[a].buf.length;)r=r/2,i=e[a].buf.slice(0,r),o=Buffer.byteLength(i);e[a].buf=e[a].buf.slice(r),he(e,i,t)}}}function ze(e){if(e[a].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[a].state,$),n=0;for(;;){let r=Atomics.load(e[a].state,q);if(r===-2)throw Error("_flushSync failed");if(r!==t)Atomics.wait(e[a].state,q,r,1e3);else break;if(++n===10)throw new Error("_flushSync took too long (10s)")}}wn.exports=We});var Ue=O((bf,_n)=>{"use strict";var{createRequire:ws}=require("module"),Ss=Ce(),{join:Ve,isAbsolute:_s,sep:Es}=require("node:path"),Os=Ie(),Ke=qe(),xs=Sn();function vs(e){Ke.register(e,ks),Ke.registerBeforeExit(e,Ts),e.on("close",function(){Ke.unregister(e)})}function As(e,t,n,r){let i=new xs({filename:e,workerData:t,workerOpts:n,sync:r});i.on("ready",o),i.on("close",function(){process.removeListener("exit",c)}),process.on("exit",c);function o(){process.removeListener("exit",c),i.unref(),n.autoEnd!==!1&&vs(i)}function c(){i.closed||(i.flushSync(),Os(100),i.end())}return i}function ks(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function Ts(e){e.flushSync()}function Ls(e){let{pipeline:t,targets:n,levels:r,dedupe:i,worker:o={},caller:c=Ss(),sync:f=!1}=e,l={...e.options},h=typeof c=="string"?[c]:c,d="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},u=e.target;if(u&&n)throw new Error("only one of target or targets can be specified");return n?(u=d["pino-worker"]||Ve(__dirname,"worker.js"),l.targets=n.filter(y=>y.target).map(y=>({...y,target:m(y.target)})),l.pipelines=n.filter(y=>y.pipeline).map(y=>y.pipeline.map(s=>({...s,level:y.level,target:m(s.target)})))):t&&(u=d["pino-worker"]||Ve(__dirname,"worker.js"),l.pipelines=[t.map(y=>({...y,target:m(y.target)}))]),r&&(l.levels=r),i&&(l.dedupe=i),l.pinoWillSendConfig=!0,As(m(u),l,o,f);function m(y){if(y=d[y]||y,_s(y)||y.indexOf("file://")===0)return y;if(y==="pino/file")return Ve(__dirname,"..","file.js");let s;for(let g of h)try{let p=g==="node:repl"?process.cwd()+Es:g;s=ws(p).resolve(y);break}catch{continue}if(!s)throw new Error(`unable to determine transport target for "${y}"`);return s}}_n.exports=Ls});var ge=O((wf,Pn)=>{"use strict";var Cs=require("node:diagnostics_channel"),En=Xt(),{mapHttpRequest:js,mapHttpResponse:$s}=Le(),Ge=sn(),On=qe(),{lsCacheSym:Bs,chindingsSym:Tn,writeSym:xn,serializersSym:Ln,formatOptsSym:vn,endSym:Ps,stringifiersSym:Cn,stringifySym:jn,stringifySafeSym:He,wildcardFirstSym:$n,nestedKeySym:Is,formattersSym:Bn,messageKeySym:Ds,errorKeySym:Ns,nestedKeyStrSym:qs,msgPrefixSym:de}=J(),{isMainThread:Rs}=require("worker_threads"),Ws=Ue(),An=Cs.tracingChannel("pino_asJson");function H(){}function Fs(e,t){if(!t)return n;return function(...i){t.call(this,i,n,e)};function n(r,...i){if(typeof r=="object"){let o=r;r!==null&&(r.method&&r.headers&&r.socket?r=js(r):typeof r.setHeader=="function"&&(r=$s(r)));let c;o===null&&i.length===0?c=[null]:(o=i.shift(),c=i),typeof this[de]=="string"&&o!==void 0&&o!==null&&(o=this[de]+o),this[xn](r,En(o,c,this[vn]),e)}else{let o=r===void 0?i.shift():r;typeof this[de]=="string"&&o!==void 0&&o!==null&&(o=this[de]+o),this[xn](null,En(o,i,this[vn]),e)}}}function Je(e){let t="",n=0,r=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var c=0;c<o&&i>=32;c++)i=e.charCodeAt(c),(i===34||i===92)&&(t+=e.slice(n,c)+"\\",n=c,r=!0);return r?t+=e.slice(n):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function zs(e,t,n,r){if(An.hasSubscribers===!1)return kn.call(this,e,t,n,r);let i={instance:this,arguments};return An.traceSync(kn,i,this,e,t,n,r)}function kn(e,t,n,r){let i=this[jn],o=this[He],c=this[Cn],f=this[Ps],l=this[Tn],h=this[Ln],d=this[Bn],u=this[Ds],m=this[Ns],y=this[Bs][n]+r;y=y+l;let s;d.log&&(e=d.log(e));let g=c[$n],p="";for(let w in e)if(s=e[w],Object.prototype.hasOwnProperty.call(e,w)&&s!==void 0){h[w]?s=h[w](s):w===m&&h.err&&(s=h.err(s));let b=c[w]||g;switch(typeof s){case"undefined":case"function":continue;case"number":Number.isFinite(s)===!1&&(s=null);case"boolean":b&&(s=b(s));break;case"string":s=(b||Je)(s);break;default:s=(b||i)(s,o)}if(s===void 0)continue;let _=Je(w);p+=","+_+":"+s}let S="";if(t!==void 0){s=h[u]?h[u](t):t;let w=c[u]||g;switch(typeof s){case"function":break;case"number":Number.isFinite(s)===!1&&(s=null);case"boolean":w&&(s=w(s)),S=',"'+u+'":'+s;break;case"string":s=(w||Je)(s),S=',"'+u+'":'+s;break;default:s=(w||i)(s,o),S=',"'+u+'":'+s}}return this[Is]&&p?y+this[qs]+p.slice(1)+"}"+S+f:y+p+S+f}function Ms(e,t){let n,r=e[Tn],i=e[jn],o=e[He],c=e[Cn],f=c[$n],l=e[Ln],h=e[Bn].bindings;t=h(t);for(let d in t)if(n=t[d],((d.length<5||d!=="level"&&d!=="serializers"&&d!=="formatters"&&d!=="customLevels")&&t.hasOwnProperty(d)&&n!==void 0)===!0){if(n=l[d]?l[d](n):n,n=(c[d]||f||i)(n,o),n===void 0)continue;r+=',"'+d+'":'+n}return r}function Vs(e){return e.write!==e.constructor.prototype.write}function ye(e){let t=new Ge(e);return t.on("error",n),!e.sync&&Rs&&(On.register(t,Ks),t.on("close",function(){On.unregister(t)})),t;function n(r){if(r.code==="EPIPE"){t.write=H,t.end=H,t.flushSync=H,t.destroy=H;return}t.removeListener("error",n),t.emit("error",r)}}function Ks(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function Us(e){return function(n,r,i={},o){if(typeof i=="string")o=ye({dest:i}),i={};else if(typeof o=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");o=ye({dest:o})}else if(i instanceof Ge||i.writable||i._writableState)o=i,i={};else if(i.transport){if(i.transport instanceof Ge||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let l;i.customLevels&&(l=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),o=Ws({caller:r,...i.transport,levels:l})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:c,onChild:f}=i;return c===!1&&(i.level="silent"),f||(i.onChild=H),o||(Vs(process.stdout)?o=process.stdout:o=ye({fd:process.stdout.fd||1})),{opts:i,stream:o}}}function Js(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[He])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function Gs(e,t,n){return{level:e,bindings:t,log:n}}function Hs(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}Pn.exports={noop:H,buildSafeSonicBoom:ye,asChindings:Ms,asJson:zs,genLog:Fs,createArgsNormalizer:Us,stringify:Js,buildFormatters:Gs,normalizeDestFileDescriptor:Hs}});var me=O((Sf,In)=>{var Xs={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},Ys={ASC:"ASC",DESC:"DESC"};In.exports={DEFAULT_LEVELS:Xs,SORTING_ORDER:Ys}});var Qe=O((_f,Rn)=>{"use strict";var{lsCacheSym:Qs,levelValSym:Xe,useOnlyCustomLevelsSym:Zs,streamSym:eo,formattersSym:to,hooksSym:no,levelCompSym:Dn}=J(),{noop:ro,genLog:M}=ge(),{DEFAULT_LEVELS:W,SORTING_ORDER:Nn}=me(),qn={fatal:e=>{let t=M(W.fatal,e);return function(...n){let r=this[eo];if(t.call(this,...n),typeof r.flushSync=="function")try{r.flushSync()}catch{}}},error:e=>M(W.error,e),warn:e=>M(W.warn,e),info:e=>M(W.info,e),debug:e=>M(W.debug,e),trace:e=>M(W.trace,e)},Ye=Object.keys(W).reduce((e,t)=>(e[W[t]]=t,e),{}),io=Object.keys(Ye).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function so(e){let t=e[to].level,{labels:n}=e.levels,r={};for(let i in n){let o=t(n[i],Number(i));r[i]=JSON.stringify(o).slice(0,-1)}return e[Qs]=r,e}function oo(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function lo(e){let{labels:t,values:n}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(n[e]===void 0)throw Error("unknown level "+e);let r=this[Xe],i=this[Xe]=n[e],o=this[Zs],c=this[Dn],f=this[no].logMethod;for(let l in n){if(c(n[l],i)===!1){this[l]=ro;continue}this[l]=oo(l,o)?qn[l](f):M(n[l],f)}this.emit("level-change",e,i,t[r],r,this)}function fo(e){let{levels:t,levelVal:n}=this;return t&&t.labels?t.labels[n]:""}function uo(e){let{values:t}=this.levels,n=t[e];return n!==void 0&&this[Dn](n,this[Xe])}function co(e,t,n){return e===Nn.DESC?t<=n:t>=n}function ao(e){return typeof e=="string"?co.bind(null,e):e}function ho(e=null,t=!1){let n=e?Object.keys(e).reduce((o,c)=>(o[e[c]]=c,o),{}):null,r=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Ye,n),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:W,e);return{labels:r,values:i}}function yo(e,t,n){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),n?[]:Object.keys(Ye).map(o=>+o),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let r=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),n?null:W,t);if(!(e in r))throw Error(`default level:${e} must be included in custom levels`)}function go(e,t){let{labels:n,values:r}=e;for(let i in t){if(i in r)throw Error("levels cannot be overridden");if(t[i]in n)throw Error("pre-existing level values cannot be used for new levels")}}function mo(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(Nn).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}Rn.exports={initialLsCache:io,genLsCache:so,levelMethods:qn,getLevel:fo,setLevel:lo,isLevelEnabled:uo,mappings:ho,assertNoLevelCollisions:go,assertDefaultLevelFound:yo,genLevelComparison:ao,assertLevelComparison:mo}});var Ze=O((Ef,Wn)=>{"use strict";Wn.exports={version:"10.1.0"}});var Gn=O((xf,Jn)=>{"use strict";var{EventEmitter:po}=require("node:events"),{lsCacheSym:bo,levelValSym:wo,setLevelSym:tt,getLevelSym:Fn,chindingsSym:be,mixinSym:So,asJsonSym:Mn,writeSym:_o,mixinMergeStrategySym:Eo,timeSym:Oo,timeSliceIndexSym:xo,streamSym:Vn,serializersSym:V,formattersSym:Q,errorKeySym:vo,messageKeySym:Ao,useOnlyCustomLevelsSym:ko,needsMetadataGsym:To,redactFmtSym:Lo,stringifySym:Co,formatOptsSym:jo,stringifiersSym:$o,msgPrefixSym:nt,hooksSym:Bo}=J(),{getLevel:Po,setLevel:Io,isLevelEnabled:Do,mappings:No,initialLsCache:qo,genLsCache:Ro,assertNoLevelCollisions:Wo}=Qe(),{asChindings:rt,asJson:Fo,buildFormatters:et,stringify:zn,noop:Kn}=ge(),{version:zo}=Ze(),Mo=Be(),Vo=class{},Un={constructor:Vo,child:Ko,bindings:Uo,setBindings:Jo,flush:Xo,isLevelEnabled:Do,version:zo,get level(){return this[Fn]()},set level(e){this[tt](e)},get levelVal(){return this[wo]},set levelVal(e){throw Error("levelVal is read-only")},get msgPrefix(){return this[nt]},get[Symbol.toStringTag](){return"Pino"},[bo]:qo,[_o]:Ho,[Mn]:Fo,[Fn]:Po,[tt]:Io};Object.setPrototypeOf(Un,po.prototype);Jn.exports=function(){return Object.create(Un)};var pe=e=>e;function Ko(e,t){if(!e)throw Error("missing bindings for child Pino");let n=this[V],r=this[Q],i=Object.create(this);if(t==null)return i[Q].bindings!==pe&&(i[Q]=et(r.level,pe,r.log)),i[be]=rt(i,e),this.onChild!==Kn&&this.onChild(i),i;if(t.hasOwnProperty("serializers")===!0){i[V]=Object.create(null);for(let h in n)i[V][h]=n[h];let f=Object.getOwnPropertySymbols(n);for(var o=0;o<f.length;o++){let h=f[o];i[V][h]=n[h]}for(let h in t.serializers)i[V][h]=t.serializers[h];let l=Object.getOwnPropertySymbols(t.serializers);for(var c=0;c<l.length;c++){let h=l[c];i[V][h]=t.serializers[h]}}else i[V]=n;if(t.hasOwnProperty("formatters")){let{level:f,bindings:l,log:h}=t.formatters;i[Q]=et(f||r.level,l||pe,h||r.log)}else i[Q]=et(r.level,pe,r.log);if(t.hasOwnProperty("customLevels")===!0&&(Wo(this.levels,t.customLevels),i.levels=No(t.customLevels,i[ko]),Ro(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let f=Mo(i.redact,zn),l={stringify:f[Lo]};i[Co]=zn,i[$o]=f,i[jo]=l}if(typeof t.msgPrefix=="string"&&(i[nt]=(this[nt]||"")+t.msgPrefix),i[be]=rt(i,e),t.level!==void 0&&t.level!==this.level||t.hasOwnProperty("customLevels")){let f=t.level||this.level;i[tt](f)}return this.onChild(i),i}function Uo(){let t=`{${this[be].substr(1)}}`,n=JSON.parse(t);return delete n.pid,delete n.hostname,n}function Jo(e){let t=rt(this,e);this[be]=t}function Go(e,t){return Object.assign(t,e)}function Ho(e,t,n){let r=this[Oo](),i=this[So],o=this[vo],c=this[Ao],f=this[Eo]||Go,l,h=this[Bo].streamWrite;e==null?l={}:e instanceof Error?(l={[o]:e},t===void 0&&(t=e.message)):(l=e,t===void 0&&e[c]===void 0&&e[o]&&(t=e[o].message)),i&&(l=f(l,i(l,n,this)));let d=this[Mn](l,t,n,r),u=this[Vn];u[To]===!0&&(u.lastLevel=n,u.lastObj=l,u.lastMsg=t,u.lastTime=r.slice(this[xo]),u.lastLogger=this),u.write(h?h(d):d)}function Xo(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[Vn];typeof t.flush=="function"?t.flush(e||Kn):e&&e()}});var Qn=O((lt,Yn)=>{"use strict";var{hasOwnProperty:Z}=Object.prototype,U=ot();U.configure=ot;U.stringify=U;U.default=U;lt.stringify=U;lt.configure=ot;Yn.exports=U;var Yo=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function F(e){return e.length<5e3&&!Yo.test(e)?`"${e}"`:JSON.stringify(e)}function it(e,t){if(e.length>200||t)return e.sort(t);for(let n=1;n<e.length;n++){let r=e[n],i=n;for(;i!==0&&e[i-1]>r;)e[i]=e[i-1],i--;e[i]=r}return e}var Qo=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function st(e){return Qo.call(e)!==void 0&&e.length!==0}function Hn(e,t,n){e.length<n&&(n=e.length);let r=t===","?"":" ",i=`"0":${r}${e[0]}`;for(let o=1;o<n;o++)i+=`${t}"${o}":${r}${e[o]}`;return i}function Zo(e){if(Z.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function el(e){let t;if(Z.call(e,"deterministic")&&(t=e.deterministic,typeof t!="boolean"&&typeof t!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return t===void 0?!0:t}function tl(e,t){let n;if(Z.call(e,t)&&(n=e[t],typeof n!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return n===void 0?!0:n}function Xn(e,t){let n;if(Z.call(e,t)){if(n=e[t],typeof n!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(n))throw new TypeError(`The "${t}" argument must be an integer`);if(n<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return n===void 0?1/0:n}function K(e){return e===1?"1 item":`${e} items`}function nl(e){let t=new Set;for(let n of e)(typeof n=="string"||typeof n=="number")&&t.add(String(n));return t}function rl(e){if(Z.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return n=>{let r=`Object can not safely be stringified. Received type ${typeof n}`;throw typeof n!="function"&&(r+=` (${n.toString()})`),new Error(r)}}}function ot(e){e={...e};let t=rl(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let n=Zo(e),r=tl(e,"bigint"),i=el(e),o=typeof i=="function"?i:void 0,c=Xn(e,"maximumDepth"),f=Xn(e,"maximumBreadth");function l(y,s,g,p,S,w){let b=s[y];switch(typeof b=="object"&&b!==null&&typeof b.toJSON=="function"&&(b=b.toJSON(y)),b=p.call(s,y,b),typeof b){case"string":return F(b);case"object":{if(b===null)return"null";if(g.indexOf(b)!==-1)return n;let _="",v=",",k=w;if(Array.isArray(b)){if(b.length===0)return"[]";if(c<g.length+1)return'"[Array]"';g.push(b),S!==""&&(w+=S,_+=`
${w}`,v=`,
${w}`);let C=Math.min(b.length,f),B=0;for(;B<C-1;B++){let z=l(String(B),b,g,p,S,w);_+=z!==void 0?z:"null",_+=v}let P=l(String(B),b,g,p,S,w);if(_+=P!==void 0?P:"null",b.length-1>f){let z=b.length-f-1;_+=`${v}"... ${K(z)} not stringified"`}return S!==""&&(_+=`
${k}`),g.pop(),`[${_}]`}let x=Object.keys(b),A=x.length;if(A===0)return"{}";if(c<g.length+1)return'"[Object]"';let E="",L="";S!==""&&(w+=S,v=`,
${w}`,E=" ");let j=Math.min(A,f);i&&!st(b)&&(x=it(x,o)),g.push(b);for(let C=0;C<j;C++){let B=x[C],P=l(B,b,g,p,S,w);P!==void 0&&(_+=`${L}${F(B)}:${E}${P}`,L=v)}if(A>f){let C=A-f;_+=`${L}"...":${E}"${K(C)} not stringified"`,L=v}return S!==""&&L.length>1&&(_=`
${w}${_}
${k}`),g.pop(),`{${_}}`}case"number":return isFinite(b)?String(b):t?t(b):"null";case"boolean":return b===!0?"true":"false";case"undefined":return;case"bigint":if(r)return String(b);default:return t?t(b):void 0}}function h(y,s,g,p,S,w){switch(typeof s=="object"&&s!==null&&typeof s.toJSON=="function"&&(s=s.toJSON(y)),typeof s){case"string":return F(s);case"object":{if(s===null)return"null";if(g.indexOf(s)!==-1)return n;let b=w,_="",v=",";if(Array.isArray(s)){if(s.length===0)return"[]";if(c<g.length+1)return'"[Array]"';g.push(s),S!==""&&(w+=S,_+=`
${w}`,v=`,
${w}`);let A=Math.min(s.length,f),E=0;for(;E<A-1;E++){let j=h(String(E),s[E],g,p,S,w);_+=j!==void 0?j:"null",_+=v}let L=h(String(E),s[E],g,p,S,w);if(_+=L!==void 0?L:"null",s.length-1>f){let j=s.length-f-1;_+=`${v}"... ${K(j)} not stringified"`}return S!==""&&(_+=`
${b}`),g.pop(),`[${_}]`}g.push(s);let k="";S!==""&&(w+=S,v=`,
${w}`,k=" ");let x="";for(let A of p){let E=h(A,s[A],g,p,S,w);E!==void 0&&(_+=`${x}${F(A)}:${k}${E}`,x=v)}return S!==""&&x.length>1&&(_=`
${w}${_}
${b}`),g.pop(),`{${_}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(r)return String(s);default:return t?t(s):void 0}}function d(y,s,g,p,S){switch(typeof s){case"string":return F(s);case"object":{if(s===null)return"null";if(typeof s.toJSON=="function"){if(s=s.toJSON(y),typeof s!="object")return d(y,s,g,p,S);if(s===null)return"null"}if(g.indexOf(s)!==-1)return n;let w=S;if(Array.isArray(s)){if(s.length===0)return"[]";if(c<g.length+1)return'"[Array]"';g.push(s),S+=p;let E=`
${S}`,L=`,
${S}`,j=Math.min(s.length,f),C=0;for(;C<j-1;C++){let P=d(String(C),s[C],g,p,S);E+=P!==void 0?P:"null",E+=L}let B=d(String(C),s[C],g,p,S);if(E+=B!==void 0?B:"null",s.length-1>f){let P=s.length-f-1;E+=`${L}"... ${K(P)} not stringified"`}return E+=`
${w}`,g.pop(),`[${E}]`}let b=Object.keys(s),_=b.length;if(_===0)return"{}";if(c<g.length+1)return'"[Object]"';S+=p;let v=`,
${S}`,k="",x="",A=Math.min(_,f);st(s)&&(k+=Hn(s,v,f),b=b.slice(s.length),A-=s.length,x=v),i&&(b=it(b,o)),g.push(s);for(let E=0;E<A;E++){let L=b[E],j=d(L,s[L],g,p,S);j!==void 0&&(k+=`${x}${F(L)}: ${j}`,x=v)}if(_>f){let E=_-f;k+=`${x}"...": "${K(E)} not stringified"`,x=v}return x!==""&&(k=`
${S}${k}
${w}`),g.pop(),`{${k}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(r)return String(s);default:return t?t(s):void 0}}function u(y,s,g){switch(typeof s){case"string":return F(s);case"object":{if(s===null)return"null";if(typeof s.toJSON=="function"){if(s=s.toJSON(y),typeof s!="object")return u(y,s,g);if(s===null)return"null"}if(g.indexOf(s)!==-1)return n;let p="",S=s.length!==void 0;if(S&&Array.isArray(s)){if(s.length===0)return"[]";if(c<g.length+1)return'"[Array]"';g.push(s);let k=Math.min(s.length,f),x=0;for(;x<k-1;x++){let E=u(String(x),s[x],g);p+=E!==void 0?E:"null",p+=","}let A=u(String(x),s[x],g);if(p+=A!==void 0?A:"null",s.length-1>f){let E=s.length-f-1;p+=`,"... ${K(E)} not stringified"`}return g.pop(),`[${p}]`}let w=Object.keys(s),b=w.length;if(b===0)return"{}";if(c<g.length+1)return'"[Object]"';let _="",v=Math.min(b,f);S&&st(s)&&(p+=Hn(s,",",f),w=w.slice(s.length),v-=s.length,_=","),i&&(w=it(w,o)),g.push(s);for(let k=0;k<v;k++){let x=w[k],A=u(x,s[x],g);A!==void 0&&(p+=`${_}${F(x)}:${A}`,_=",")}if(b>f){let k=b-f;p+=`${_}"...":"${K(k)} not stringified"`}return g.pop(),`{${p}}`}case"number":return isFinite(s)?String(s):t?t(s):"null";case"boolean":return s===!0?"true":"false";case"undefined":return;case"bigint":if(r)return String(s);default:return t?t(s):void 0}}function m(y,s,g){if(arguments.length>1){let p="";if(typeof g=="number"?p=" ".repeat(Math.min(g,10)):typeof g=="string"&&(p=g.slice(0,10)),s!=null){if(typeof s=="function")return l("",{"":y},[],s,p,"");if(Array.isArray(s))return h("",y,[],nl(s),p,"")}if(p.length!==0)return d("",y,[],p,"")}return u("",y,[])}return m}});var nr=O((vf,tr)=>{"use strict";var ft=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:er}=me(),il=er.info;function sl(e,t){e=e||[],t=t||{dedupe:!1};let n=Object.create(er);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(u=>{n[u]=t.levels[u]});let r={write:i,add:f,remove:l,emit:o,flushSync:c,end:h,minLevel:0,lastId:0,streams:[],clone:d,[ft]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(f,r):f.call(r,e),e=null,r;function i(u){let m,y=this.lastLevel,{streams:s}=this,g=0,p;for(let S=ol(s.length,t.dedupe);fl(S,s.length,t.dedupe);S=ll(S,t.dedupe))if(m=s[S],m.level<=y){if(g!==0&&g!==m.level)break;if(p=m.stream,p[ft]){let{lastTime:w,lastMsg:b,lastObj:_,lastLogger:v}=this;p.lastLevel=y,p.lastTime=w,p.lastMsg=b,p.lastObj=_,p.lastLogger=v}p.write(u),t.dedupe&&(g=m.level)}else if(!t.dedupe)break}function o(...u){for(let{stream:m}of this.streams)typeof m.emit=="function"&&m.emit(...u)}function c(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync()}function f(u){if(!u)return r;let m=typeof u.write=="function"||u.stream,y=u.write?u:u.stream;if(!m)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:s,streamLevels:g}=this,p;typeof u.levelVal=="number"?p=u.levelVal:typeof u.level=="string"?p=g[u.level]:typeof u.level=="number"?p=u.level:p=il;let S={stream:y,level:p,levelVal:void 0,id:++r.lastId};return s.unshift(S),s.sort(Zn),this.minLevel=s[0].level,r}function l(u){let{streams:m}=this,y=m.findIndex(s=>s.id===u);return y>=0&&(m.splice(y,1),m.sort(Zn),this.minLevel=m.length>0?m[0].level:-1),r}function h(){for(let{stream:u}of this.streams)typeof u.flushSync=="function"&&u.flushSync(),u.end()}function d(u){let m=new Array(this.streams.length);for(let y=0;y<m.length;y++)m[y]={level:u,stream:this.streams[y].stream};return{write:i,add:f,remove:l,minLevel:u,streams:m,clone:d,emit:o,flushSync:c,[ft]:!0}}}function Zn(e,t){return e.level-t.level}function ol(e,t){return t?e-1:0}function ll(e,t){return t?e-1:e+1}function fl(e,t,n){return n?e>=0:e<t}tr.exports=sl});var mr=O((Af,I)=>{function ut(e){try{let t=require("path"),n=process.cwd(),r=t.resolve(n,"dist/");return t.resolve(r,e.replace(/^\.\//,""))}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":ut("./thread-stream-worker.js"),"pino-worker":ut("./pino-worker.js"),"pino/file":ut("./pino-file.js")};var ul=require("node:os"),cr=Le(),cl=Ce(),al=Be(),ar=Gt(),hl=Gn(),hr=J(),{configure:dl}=Qn(),{assertDefaultLevelFound:yl,mappings:dr,genLsCache:gl,genLevelComparison:ml,assertLevelComparison:pl}=Qe(),{DEFAULT_LEVELS:yr,SORTING_ORDER:bl}=me(),{createArgsNormalizer:wl,asChindings:Sl,buildSafeSonicBoom:rr,buildFormatters:_l,stringify:ct,normalizeDestFileDescriptor:ir,noop:El}=ge(),{version:Ol}=Ze(),{chindingsSym:sr,redactFmtSym:xl,serializersSym:or,timeSym:vl,timeSliceIndexSym:Al,streamSym:kl,stringifySym:lr,stringifySafeSym:at,stringifiersSym:fr,setLevelSym:Tl,endSym:Ll,formatOptsSym:Cl,messageKeySym:jl,errorKeySym:$l,nestedKeySym:Bl,mixinSym:Pl,levelCompSym:Il,useOnlyCustomLevelsSym:Dl,formattersSym:ur,hooksSym:Nl,nestedKeyStrSym:ql,mixinMergeStrategySym:Rl,msgPrefixSym:Wl}=hr,{epochTime:gr,nullTime:Fl}=ar,{pid:zl}=process,Ml=ul.hostname(),Vl=cr.err,Kl={level:"info",levelComparison:bl.ASC,levels:yr,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:zl,hostname:Ml},serializers:Object.assign(Object.create(null),{err:Vl}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:gr,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},Ul=wl(Kl),Jl=Object.assign(Object.create(null),cr);function ht(...e){let t={},{opts:n,stream:r}=Ul(t,cl(),...e);n.level&&typeof n.level=="string"&&yr[n.level.toLowerCase()]!==void 0&&(n.level=n.level.toLowerCase());let{redact:i,crlf:o,serializers:c,timestamp:f,messageKey:l,errorKey:h,nestedKey:d,base:u,name:m,level:y,customLevels:s,levelComparison:g,mixin:p,mixinMergeStrategy:S,useOnlyCustomLevels:w,formatters:b,hooks:_,depthLimit:v,edgeLimit:k,onChild:x,msgPrefix:A}=n,E=dl({maximumDepth:v,maximumBreadth:k}),L=_l(b.level,b.bindings,b.log),j=ct.bind({[at]:E}),C=i?al(i,j):{},B=i?{stringify:C[xl]}:{stringify:j},P="}"+(o?`\r
`:`
`),z=Sl.bind(null,{[sr]:"",[or]:c,[fr]:C,[lr]:ct,[at]:E,[ur]:L}),we="";u!==null&&(m===void 0?we=z(u):we=z(Object.assign({},u,{name:m})));let dt=f instanceof Function?f:f?gr:Fl,pr=dt().indexOf(":")+1;if(w&&!s)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(p&&typeof p!="function")throw Error(`Unknown mixin type "${typeof p}" - expected "function"`);if(A&&typeof A!="string")throw Error(`Unknown msgPrefix type "${typeof A}" - expected "string"`);yl(y,s,w);let yt=dr(s,w);typeof r.emit=="function"&&r.emit("message",{code:"PINO_CONFIG",config:{levels:yt,messageKey:l,errorKey:h}}),pl(g);let br=ml(g);return Object.assign(t,{levels:yt,[Il]:br,[Dl]:w,[kl]:r,[vl]:dt,[Al]:pr,[lr]:ct,[at]:E,[fr]:C,[Ll]:P,[Cl]:B,[jl]:l,[$l]:h,[Bl]:d,[ql]:d?`,${JSON.stringify(d)}:{`:"",[or]:c,[Pl]:p,[Rl]:S,[sr]:we,[ur]:L,[Nl]:_,silent:El,onChild:x,[Wl]:A}),Object.setPrototypeOf(t,hl()),gl(t),t[Tl](y),t}I.exports=ht;I.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=ir(e.dest||process.stdout.fd),rr(e)):rr({dest:ir(e),minLength:0});I.exports.transport=Ue();I.exports.multistream=nr();I.exports.levels=dr();I.exports.stdSerializers=Jl;I.exports.stdTimeFunctions=Object.assign({},ar);I.exports.symbols=hr;I.exports.version=Ol;I.exports.default=ht;I.exports.pino=ht});var Gl=mr(),{once:Hl}=require("node:events");module.exports=async function(e={}){let t=Object.assign({},e,{dest:e.destination||1,sync:!1});delete t.destination;let n=Gl.destination(t);return await Hl(n,"ready"),n};
